(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,r){e.exports=r(223)},144:function(e,t,r){},187:function(e,t,r){},220:function(e,t){},223:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(19),o=r.n(c),u=r(9);r(144),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s,l=r(3),i=r.n(l),d=r(1),p=r(7),m=r(12),g=r(20),f=r(8),b=r.n(f),v=r(21),j=r(43);!function(e){e[e.None=0]="None",e[e.Pending=1]="Pending",e[e.Judge=2]="Judge",e[e.Admin=3]="Admin",e[e.Owner=4]="Owner"}(s||(s={}));var h={id:-1,name:"",email:"",company:"",role:s.Pending,isJudging:!1,tags:[]};function y(e){return Object(d.a)({},e,{isJudging:e.role!==s.Pending&&e.isJudging,role:P(e.role)})}function E(e){if(e.id&&e.name&&e.email&&e.role&&e.tags)return Object(d.a)({},e,{role:O(e.role)});throw new Error("Server returned an unexpected result.")}function O(e){switch(e){case"owner":return s.Owner;case"admin":return s.Admin;case"judge":return s.Judge;case"pending":return s.Pending;default:return s.None}}function w(e){switch(e){case s.Owner:return"Owner";case s.Admin:return"Admin";case s.Judge:return"Judge";case s.Pending:return"Pending";case s.None:return"None";default:return null}}function P(e){switch(e){case s.Owner:return"owner";case s.Admin:return"admin";case s.Judge:return"judge";case s.Pending:return"pending";case s.None:return"none";default:return null}}var x="ACCOUNT_UPDATE_USER",k="ACCOUNT_LOGIN_USER",C="ACCOUNT_LOGOUT_USER",I={role:s.None};function D(e){return{type:k,user:e}}var S=r(239),q=r(237),G=Object(v.g)(function(e){var t=function(){var t=e.location.pathname.split("/")[1];return""===t?"/":"/".concat(t)},r=n.a.useState(t()),a=Object(m.a)(r,2),c=a[0],o=a[1];n.a.useEffect(function(){o(t())},[e.location]);var u=function(r){e.history.push(r),o(t())};return n.a.createElement(q.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",expand:"sm"},n.a.createElement(j.b,{to:"/",style:{textDecoration:"none"},onClick:function(){return u("/")}},n.a.createElement(q.a.Brand,null,"HackGT Expo")),n.a.createElement(q.a.Toggle,{"aria-controls":"navigation"}),n.a.createElement(q.a.Collapse,null,function(e){var t=[];switch(e){case s.Owner:case s.Admin:t=[["Home","/"],["Judging","/judging"],["Projects","/projects"],["Admin","/admin"]];break;case s.Judge:t=[["Home","/"],["Judging","/judging"],["Projects","/projects"]];break;case s.Pending:t=[["Home","/"],["Projects","/projects"]];break;default:t=[["Projects","/"]]}return n.a.createElement(S.a,{className:"mr-auto"},t.map(function(e){return n.a.createElement(S.a.Link,{key:e[0],eventKey:e[0],active:e[1]===c,onSelect:function(){return u(e[1])}},e[0])}))}(e.account.role),e.account.role>=s.Pending?n.a.createElement(S.a,null,n.a.createElement(S.a.Link,{active:"/logout"===c,eventKey:"logout",onSelect:function(){return u("/logout")}},"Logout")):n.a.createElement(S.a,null,n.a.createElement(S.a.Link,{active:"/login"===c,eventKey:"login",onSelect:function(){return u("/login")}},"Login"))))}),T=r(63),B=r(226),N=r(236),J=r(124),A=r(227),R=Object(u.b)(function(e){return{account:e.account}},function(e){return{loginUser:function(t){return e(D(t))},updateSocket:function(){e({update:!0})}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"change-error":return Object(d.a)({},e,{error:t.error,requesting:!1});case"change-inputs":return Object(d.a)({},e,{inputs:Object(d.a)({},e.inputs,t.inputs)});case"request-start":return Object(d.a)({},e,{requesting:!0,error:{name:"",message:""}});case"request-finish":return Object(d.a)({},e,{requesting:!1,success:!1});case"request-success":return Object(d.a)({},e,{requesting:!1,success:!0});default:return e}},{requesting:!1,inputs:{email:"",password:""},error:{name:"",message:""},success:!1},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=function(){var t=Object(p.a)(i.a.mark(function t(r){var n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),0!==a.inputs.email.length&&0!==a.inputs.password.length){t.next=4;break}return c({type:"change-error",error:{name:"Error Logging In",message:"One or more fields were left blank."}}),t.abrupt("return");case 4:return c({type:"request-start"}),t.next=7,b.a.post("/auth/login",T.stringify({email:a.inputs.email.toLowerCase(),password:a.inputs.password}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:if(n=t.sent,o=n.data,n.status&&o.id&&o.name&&o.email&&o.role){t.next=13;break}return c({type:"change-error",error:{name:"Error Logging In",message:"Incorrect email or password."}}),c({type:"request-finish"}),t.abrupt("return");case 13:e.loginUser({id:o.id,name:o.name,email:o.email,company:o.company,role:O(o.role),tags:o.tags}),e.updateSocket(),c({type:"request-success"});case 16:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.success?n.a.createElement(v.a,{to:"/"}):n.a.createElement("div",{style:{margin:"0 auto",maxWidth:400}},n.a.createElement("h1",{style:{textAlign:"center",paddingBottom:10}},"Login"),n.a.createElement(N.a,null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"change-inputs",inputs:{email:e.target.value}})},value:a.inputs.email,type:"email",placeholder:"Email"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Control,{disabled:a.requesting,type:"password",placeholder:"Password",onChange:function(e){return c({type:"change-inputs",inputs:{password:e.target.value}})}})),n.a.createElement(J.a,{variant:"primary",type:"submit",onClick:o,block:!0},a.requesting?n.a.createElement(A.a,{animation:"border",role:"status",size:"sm"}):"Login")),a.error.name?n.a.createElement(B.a,{variant:"danger"},n.a.createElement("strong",null,a.error.name),n.a.createElement("div",null,a.error.message)):null)}),L=function(e){return new Promise(function(t){return setTimeout(t,e)})},U=Object(u.b)(null,function(e){return{logoutUser:function(){e({type:C,user:I})},updateSocket:function(){e({update:!0})}}})(function(e){var t=n.a.useState(!1),r=Object(m.a)(t,2),a=r[0],c=r[1];return n.a.useEffect(function(){!function(){var t=Object(p.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([b.a.get("/auth/logout"),L(500)]);case 2:e.logoutUser(),e.updateSocket(),c(!0);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[a]),a?n.a.createElement(v.a,{to:"/"}):n.a.createElement(A.a,{animation:"grow"})}),M=Object(u.b)(function(e){return{account:e.account}},function(e){return{loginUser:function(t){e(D(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{requesting:!1},void 0),r=Object(m.a)(t,2);r[0],r[1];return n.a.createElement("div",null,"Profile")}),F=r(228),_=r(240),Q=r(235),H=r(10);function z(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var W="UPDATE_PROJECT",K="DELETE_PROJECT",Y="FILL_PROJECTS",V="APPEND_FILL_PROJECTS";function X(e){return{type:W,project:e}}function $(e){return{type:Y,projects:e}}function Z(){return function(){var e=Object(p.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/projects/allProjects");case 3:if(!(r=e.sent).status){e.next=9;break}a=r.data,t($(a)),e.next=10;break;case 9:throw new Error("API Error");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}function ee(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var te="UPDATE_CATEGORY",re="DELETE_CATEGORY",ae="FILL_CATEGORIES",ne="UPDATE_CRITERIA",ce="DELETE_CRITERIA",oe="FILL_CRITERIA";function ue(e){return{type:te,categories:e}}function se(e){return{type:ae,categories:e}}function le(){return function(){var e=Object(p.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/categories/allCategoriesCriteria");case 3:(r=e.sent).status&&(a=r.data,t(se(a))),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.resolve());case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}function ie(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var de="UPDATE_TABLE_GROUP",pe="DELETE_TABLE_GROUP",me="FILL_TABLE_GROUPS";function ge(e){return{type:me,tableGroups:e}}function fe(){return function(){var e=Object(p.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/tableGroups/allTableGroups");case 3:if(!(r=e.sent).status){e.next=9;break}a=r.data,t(ge(a)),e.next=10;break;case 9:throw new Error("API Error");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}var be,ve=Object(u.b)(function(e){return{categories:e.categories,projects:e.projects,tableGroups:e.tableGroups}},function(e){return{fetchTableGroups:function(){e(fe())},fetchProjects:function(){e(Z())},fillCategories:function(t){e(se(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"toggle-modal":return Object(d.a)({},e,{modalOpen:!e.modalOpen});case"change-filterBy":return Object(d.a)({},e,{filterBy:t.categoryID});case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});case"change-search":return Object(d.a)({},e,{searchText:t.search});default:return e}},{requesting:!1,filterBy:0,modalOpen:!1,searchText:""},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1];n.a.useEffect(function(){!function(){var t=Object(p.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"request-start"}),t.next=3,Promise.all([e.fetchTableGroups(),e.fetchProjects(),o()]);case 3:c({type:"request-finish"});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[]);var o=function(){var t=Object(p.a)(i.a.mark(function t(){var r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/api/categories/allCategories");case 2:(r=t.sent).status&&(a=r.data,e.fillCategories(a));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:"100%"}},n.a.createElement("div",{style:{margin:"0 auto",maxWidth:1300,display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}},n.a.createElement("h1",null,"Projects"),n.a.createElement("div",{style:{flexGrow:2}}),n.a.createElement(J.a,{style:{width:130},variant:"outline-dark",onClick:function(){return c({type:"toggle-modal"})}},"Categories"),n.a.createElement(N.a.Control,{style:{maxWidth:300,margin:"0 12px"},value:a.searchText,onChange:function(e){return c({type:"change-search",search:e.target.value})},type:"text",placeholder:"Search for projects"})),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",maxWidth:1300,margin:"12px auto 0"}},function(){if(Object.values(e.categories.categories).length>0&&Object.values(e.projects).length>0&&Object.values(e.tableGroups).length>0)return Object.values(e.projects).filter(function(e){return!a.filterBy||e.categoryIDs.includes(a.filterBy)}).filter(function(e){return e.name.toLowerCase().includes(a.searchText.toLowerCase())}).map(function(t){var r=t.categoryIDs.filter(function(t){return null!=e.categories.categories[t]&&!e.categories.categories[t].isHidden}).map(function(t){return n.a.createElement(F.a,{key:t,variant:"secondary",style:{margin:"0 2px"}},e.categories.categories[t].name)}),a=e.tableGroups[t.tableGroupID];return n.a.createElement("a",{key:t.id,href:t.devpostURL,target:"_blank",style:{textDecoration:"none",width:"18rem",margin:6}},n.a.createElement(_.a,{style:{height:"100%"}},n.a.createElement(_.a.Body,null,n.a.createElement(_.a.Title,{style:{color:a.color}},t.name),n.a.createElement(_.a.Subtitle,{className:"mb-2 text-muted"},"Expo ",t.expoNumber,", Table: ",a.name," ",t.tableNumber),n.a.createElement(_.a.Text,null,r))))})}())),n.a.createElement(Q.a,{show:a.modalOpen,onHide:function(){return c({type:"toggle-modal"})}},n.a.createElement(Q.a.Header,{closeButton:!0},"Filter Projects"),n.a.createElement(Q.a.Body,null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Check,{checked:0===a.filterBy,name:"prizeName",type:"radio",label:"All Projects",onChange:function(){return c({type:"change-filterBy",categoryID:0})}}),Object.values(e.categories.categories).filter(function(e){return!e.isHidden}).map(function(e){return n.a.createElement(N.a.Check,{checked:a.filterBy===e.id,key:e.id,type:"radio",name:"prizeName",label:e.name,onChange:function(){return c({type:"change-filterBy",categoryID:e.id})}})})))))}),je=r(127);!function(e){e.Pending="pending",e.Assigned="assigned",e.Submitted="submitted",e.Missing="missing",e.Busy="busy",e.Skipped="skipped",e.Started="started"}(be||(be={}));var he={id:0,name:"",devpostURL:"",expoNumber:0,roundNumber:0,tableGroupID:0,tableNumber:0,roomUrl:"",categoryIDs:[],tags:[]},ye={id:-1,name:"",shortcode:"",color:""},Ee="REQUEST_START",Oe="REQUEST_FINISH";function we(){return{type:Ee}}function Pe(){return{type:Oe}}var xe=r(86),ke=r(126),Ce=r.n(ke),Ie="FILL_BALLOTS",De="UPDATE_BALLOTS",Se="DELETE_BALLOTS",qe="CLEAR_BALLOTS",Ge="QUEUE_PROJECT",Te="QUEUED_PROJECT",Be="SCORE_PROJECT",Ne="GOT_PROJECT",Je="BUSY_PROJECT",Ae="SKIP_PROJECT",Re="MISSING_PROJECT";function Le(e){return{type:Ie,ballots:e}}function Ue(){return{type:qe}}function Me(){return function(){var e=Object(p.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/ballots/allBallots");case 3:if(!(r=e.sent).status){e.next=9;break}a=r.data,t(Le(a)),e.next=10;break;case 9:throw new Error("API Error");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}var Fe={dJudgeQueues:{},dJudgeProjectBallotsMap:{},dProjectScores:{}};var _e;r(83),r(187);!function(e){e[e.Loading=0]="Loading",e[e.FindProject=1]="FindProject",e[e.JudgeProject=2]="JudgeProject",e[e.NextProject=3]="NextProject",e[e.NoProject=4]="NoProject"}(_e||(_e={}));var Qe=Object(u.b)(function(e){return{account:e.account,ballots:e.ballots,categories:e.categories,tableGroups:e.tableGroups}},function(e){return{fetchTableGroups:function(){e(fe())},fetchCategories:function(){e(le())},updateBallots:function(t){e(function(e){return{type:De,ballots:e}}(t))},startBallots:function(t,r){e(function(e,t){return function(){var r=Object(p.a)(i.a.mark(function r(a){var n,c;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.post("/api/projects/startProject",{userID:e,projectID:t});case 3:(n=r.sent).status&&(c=n.data,a(Le(c))),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",Promise.resolve());case 11:case"end":return r.stop()}},r,null,[[0,7]])}));return function(e){return r.apply(this,arguments)}}()}(t,r))},clearBallots:function(){e(Ue())},requestFinish:function(){e(Pe())},requestStart:function(){e(we())},missingBallots:function(t,r){e(function(e,t){return function(){var r=Object(p.a)(i.a.mark(function r(a){var n;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.post("/api/projects/missing",{userID:e,projectID:t});case 3:(n=r.sent).status&&(n.data,a(Ue())),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",Promise.resolve());case 11:case"end":return r.stop()}},r,null,[[0,7]])}));return function(e){return r.apply(this,arguments)}}()}(t,r))},busyBallots:function(t,r){e(function(e,t){return function(){var r=Object(p.a)(i.a.mark(function r(a){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.post("/api/projects/busy",{userID:e,projectID:t});case 3:r.sent.status&&a(Ue()),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",Promise.resolve());case 11:case"end":return r.stop()}},r,null,[[0,7]])}));return function(e){return r.apply(this,arguments)}}()}(t,r))},skipBallots:function(t,r){e(function(e,t){return function(){var r=Object(p.a)(i.a.mark(function r(a){var n;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.post("/api/projects/skip",{userID:e,projectID:t});case 3:(n=r.sent).status&&(n.data,a(Ue())),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",Promise.resolve());case 11:case"end":return r.stop()}},r,null,[[0,7]])}));return function(e){return r.apply(this,arguments)}}()}(t,r))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"update-criteria":return Object(d.a)({},e,{criteria:t.criteria});case"update-current-project":return Object(d.a)({},e,{currentProject:t.project});case"update-judging-state":return Object(d.a)({},e,{judgingState:t.state});default:return e}},{criteria:{},currentProject:void 0,judgingState:_e.Loading},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=function(e){if(Object.values(e).length>0){var t=Object.values(e)[0];t.status===be.Started?c({type:"update-judging-state",state:_e.JudgeProject}):t.status===be.Assigned&&c({type:"update-judging-state",state:_e.FindProject})}else c({type:"update-current-project",project:he}),c({type:"update-judging-state",state:_e.NoProject})},u=function(){var t=Object(p.a)(i.a.mark(function t(r){var a,n,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/projects/nextProject",{userID:r});case 2:a=t.sent,Object.values(a.data.ballots).length>0&&(n=a.data.ballots,u=a.data.project,e.updateBallots(n),c({type:"update-current-project",project:Object.values(u)[0]})),o(a.data.ballots);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();n.a.useEffect(function(){e.fetchTableGroups(),e.fetchCategories(),u(e.account.id)},[]),n.a.useEffect(function(){o(e.ballots)},[e.ballots]);var s=function(){return n.a.createElement("div",{style:{marginTop:20}},n.a.createElement(je.a,null,n.a.createElement(J.a,{onClick:function(){e.skipBallots(e.account.id,a.currentProject.id),c({type:"update-judging-state",state:_e.NextProject}),c({type:"update-current-project",project:he})},variant:"outline-danger"},"Skip")))},l=function(){var t=function(){var t=Object(p.a)(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.values(e.ballots).reduce(function(e,t){return e[t.id]=t.score,e},{}),t.next=3,b.a.post("api/projects/scoreProject",{ballots:r});case 3:t.sent.status&&(e.clearBallots(),c({type:"update-judging-state",state:_e.NextProject}),c({type:"update-current-project",project:he}));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return a.currentProject&&0!==a.currentProject.id?n.a.createElement("div",{style:{textAlign:"center",margin:"0 auto"}},n.a.createElement("h1",null,a.currentProject.name),n.a.createElement("h3",null,n.a.createElement("a",{href:a.currentProject.devpostURL,style:{textDecoration:"underline"},target:"_blank"},"View DevPost Submission")),n.a.createElement("h6",null,n.a.createElement("span",{style:{color:e.tableGroups[a.currentProject.tableGroupID].color}},e.tableGroups[a.currentProject.tableGroupID].name)," ",a.currentProject.tableNumber),n.a.createElement("iframe",{src:a.currentProject.roomUrl+"?name=[Judge] "+e.account.name,allow:"camera; microphone; fullscreen; speaker",width:"90%",style:{height:"75vh"}}),n.a.createElement("h6",null,"Note: If the above video call does not work, please open it in a different tab ",n.a.createElement("a",{href:a.currentProject.roomUrl,target:"_blank"},"here")),Object.values(e.ballots).map(function(t){if(!t.criteriaID)return null;var r,a,c,o=e.categories.categories[e.categories.criteria[t.criteriaID].categoryID],u=e.categories.criteria[t.criteriaID];return n.a.createElement(_.a,{key:t.id,style:{margin:"12px auto",maxWidth:"560px"}},n.a.createElement(_.a.Body,null,n.a.createElement(_.a.Title,null,u.name),n.a.createElement(_.a.Subtitle,null,o.name),n.a.createElement(_.a.Text,{style:{textAlign:"left",whiteSpace:"pre-wrap"}},u.rubric),(r=t.id,a=u.minScore,c=u.maxScore,n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"row"}},a,n.a.createElement("input",{type:"range",min:a,max:c,className:"slider",value:e.ballots[r].score,onChange:function(t){e.updateBallots(Object(H.a)({},r,Object(d.a)({},e.ballots[r],{score:+t.target.value})))}}),c),n.a.createElement("div",null,n.a.createElement("strong",null,e.ballots[r].score))))))}),n.a.createElement(J.a,{size:"lg",variant:"success",onClick:function(){return t()}},"Submit Scores"),s()):null};if(0===Object.values(e.tableGroups).length||!a.currentProject||0===Object.values(e.categories.criteria).length)return null;switch(a.judgingState){case _e.FindProject:return e.startBallots(e.account.id,a.currentProject.id),l();case _e.JudgeProject:return l();case _e.NextProject:return function(){var t=["You are out of control!","Absolutely incredible!","Congratulations!","You're on a roll!","Keep it going!","Just a couple hundred projects left to go!","Great Job"];return n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h3",null,t[Math.floor(Math.random()*t.length)]),n.a.createElement("p",null,"Your scores have been submitted!"),n.a.createElement(J.a,{onClick:function(){return u(e.account.id)}},"Next Project"))}();case _e.NoProject:return n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("p",null,"There are currently no projects assigned to you."),n.a.createElement(J.a,{onClick:function(){return u(e.account.id)}},"Refresh"))}return null}),He=Object(v.g)(function(e){var t=function(){var t=e.location.pathname.split("/")[2];return t?"/".concat(t):"/"},r=n.a.useState(t()),a=Object(m.a)(r,2),c=a[0],o=a[1];n.a.useEffect(function(){o(t())});var u=function(r){e.history.push(r),o(t())};return n.a.createElement(S.a,{variant:"tabs",activeKey:c},n.a.createElement(S.a.Item,null,n.a.createElement(S.a.Link,{eventKey:"/",onClick:function(){return u("".concat(At))}},"Projects")),n.a.createElement(S.a.Item,null,n.a.createElement(S.a.Link,{eventKey:"/categories",onClick:function(){return u("".concat(At,"/categories"))}},"Categories")),n.a.createElement(S.a.Item,null,n.a.createElement(S.a.Link,{eventKey:"/users",onClick:function(){return u("".concat(At,"/users"))}},"Users")),n.a.createElement(S.a.Item,null,n.a.createElement(S.a.Link,{eventKey:"/dashboard",onClick:function(){return u("".concat(At,"/dashboard"))}},"Dashboard")))}),ze="ADD_USER",We="DELETE_USER",Ke="UPDATE_USER",Ye="FILL_USERS";function Ve(e){return{type:Ke,user:e}}function Xe(){return function(){var e=Object(p.a)(i.a.mark(function e(t){var r,a,n,c,o,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/users/allUsers");case 3:if(!(r=e.sent).status){e.next=12;break}for(a=r.data,n={},c=0,o=Object.values(a);c<o.length;c++)u=o[c],n[u.id]=Object(d.a)({},u,{role:O(u.role)});t({type:Ye,users:n}),e.next=13;break;case 12:throw new Error("API Error");case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.resolve());case 19:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}()}var $e=r(229),Ze=r(241),et=r(128),tt=Object(u.b)(function(e){return{account:e.account,companies:e.companies}},function(e){return{updateUser:function(t){e(Ve(t))},requestFinish:function(){e(Pe())},requestStart:function(){e(we())}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"update-user":return Object(d.a)({},e,{user:t.user});default:return e}},{requesting:!1,user:e.user},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=e.user;n.a.useEffect(function(){c({type:"update-user",user:e.user})},[o]);var u=function(){var t=Object(p.a)(i.a.mark(function t(){var r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.requestStart(),t.next=4,b.a.post("/api/users/update",{user:y(a.user)});case 4:(r=t.sent).status&&(n=r.data,e.requestFinish(),e.closeModal(),e.updateUser(E(n))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Server error. Please try again."),window.location.reload();case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}();return n.a.createElement(Q.a,{show:e.modalOpen,onHide:e.closeModal},n.a.createElement(Q.a.Header,{closeButton:!0},n.a.createElement(Q.a.Title,null,"Edit User ",e.user.id)),n.a.createElement(Q.a.Body,null,n.a.createElement(N.a,null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Name"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"update-user",user:Object(d.a)({},a.user,{name:e.target.value})})},value:a.user.name,type:"text",placeholder:"Name"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Permission Level"),n.a.createElement($e.a,null,n.a.createElement(Ze.a,{name:"role",onChange:function(e){return c({type:"update-user",user:Object(d.a)({},a.user,{role:e})})},type:"radio",value:a.user.role},n.a.createElement(et.a,{disabled:a.requesting,value:s.Pending},"Pending"),n.a.createElement(et.a,{disabled:a.requesting,value:s.Judge},"Judge"),n.a.createElement(et.a,{disabled:a.requesting,value:s.Admin},"Admin"),n.a.createElement(et.a,{disabled:a.requesting,value:s.Owner},"Owner")))),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Company/Group Name"),n.a.createElement(N.a.Control,{as:"select",disabled:a.requesting,onChange:function(e){return c({type:"update-user",user:Object(d.a)({},a.user,{company:e.target.value})})},value:a.user.company,type:"text",placeholder:"Company"},e.companies.map(function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement(N.a.Group,null,n.a.createElement(J.a,{variant:"outline-danger"},"Reset Password")))),n.a.createElement(Q.a.Footer,null,n.a.createElement(J.a,{variant:"secondary",onClick:e.closeModal},"Close"),n.a.createElement(J.a,{variant:"primary",onClick:u},"Save Changes")))}),rt=Object(u.b)(function(e){return{requesting:e.requesting}},function(e){return{requestFinish:function(){e(Pe())},requestStart:function(){e(we())},updateUser:function(t){e(Ve(t))}}})(function(e){var t,r=function(){var t=Object(p.a)(i.a.mark(function t(r,a){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.preventDefault(),e.requestStart(),a.role=s.Judge,a.isJudging=!0,t.next=7,b.a.post("/api/users/update",{user:y(a)});case 7:(n=t.sent).status&&(e.updateUser(E(n.data)),e.requestFinish()),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),alert("Server error. Please try again."),window.location.reload();case 15:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e,r){return t.apply(this,arguments)}}(),a=function(){var t=Object(p.a)(i.a.mark(function t(r,a,n){var c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.preventDefault(),e.requestStart(),a.isJudging=n,t.next=6,b.a.post("/api/users/update",{user:y(a)});case 6:(c=t.sent).status&&(e.updateUser(E(c.data)),e.requestFinish()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),alert("Server error. Please try again."),window.location.reload();case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e,r,a){return t.apply(this,arguments)}}();return n.a.createElement(_.a,{key:e.user.id,style:{width:"18rem",margin:"12px"}},n.a.createElement(_.a.Body,null,n.a.createElement(_.a.Title,null,e.user.name),n.a.createElement(_.a.Subtitle,{className:"mb-2 text-muted"},w(e.user.role),n.a.createElement(F.a,{variant:e.user.isJudging?"success":"light",style:{margin:5}},e.user.isJudging?"Included In Judging":"Excluded From Judging")),n.a.createElement(_.a.Text,null,e.user.email,n.a.createElement("br",null),e.user.company,n.a.createElement("br",null),e.user.tags&&e.user.tags.length>0?n.a.createElement("span",null,e.user.tags):n.a.createElement("span",null,"No tags")),n.a.createElement(je.a,null,n.a.createElement(J.a,{disabled:e.requesting,onClick:function(t){return e.openModal(t,e.user)},size:"sm",variant:"primary"},"Edit"),(t=e.user).role===s.Pending?n.a.createElement(J.a,{disabled:e.requesting,onClick:function(t){return r(t,e.user)},size:"sm",variant:"outline-success"},"Approve"):t.isJudging?n.a.createElement(J.a,{disabled:e.requesting,onClick:function(t){return a(t,e.user,!1)},size:"sm",variant:"outline-danger"},"Exclude From Judging"):n.a.createElement(J.a,{disabled:e.requesting,onClick:function(t){return a(t,e.user,!0)},size:"sm",variant:"outline-success"},"Include In Judging"))))}),at="UPDATE_COMPANIES";function nt(){return function(){var e=Object(p.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("/api/categories/companies");case 3:if(!(r=e.sent).status){e.next=9;break}a=r.data,t({type:at,companies:a}),e.next=10;break;case 9:throw new Error("API Error");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.resolve());case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}var ct=Object(u.b)(function(e){return{account:e.account,requesting:e.requesting,users:e.users}},function(e){return{fetchCompanies:function(){e(nt())},fetchUsers:function(){e(Xe())},requestFinish:function(){e(Pe())},requestStart:function(){e(we())}}})(function(e){var t={newUser:h,modalOpen:!1,modalUser:h},r=n.a.useReducer(function(e,t){switch(t.type){case"modal-open":return Object(d.a)({},e,{modalOpen:!0,modalUser:t.user});case"modal-close":return Object(d.a)({},e,{modalOpen:!1});case"change-newUser":return Object(d.a)({},e,{newUser:Object(d.a)({},e.newUser,t.newUser)});default:return e}},t,void 0),a=Object(m.a)(r,2),c=a[0],o=a[1];n.a.useEffect(function(){u(),e.fetchCompanies()},[]);var u=function(){var t=Object(p.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.requestStart(),e.fetchUsers(),e.requestFinish();case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return Object.keys(e.users).length>0?n.a.createElement("div",{style:{margin:"12px"}},n.a.createElement("h1",{style:{textAlign:"center"}},"Users"),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",maxWidth:1300,margin:"12px auto 0"}},function(){var t=function(e,t){e.preventDefault(),o({type:"modal-open",user:t})};return Object.values(e.users).map(function(e){return n.a.createElement(rt,{key:e.id,user:e,openModal:t})})}(),n.a.createElement(tt,{modalOpen:c.modalOpen,closeModal:function(){return o({type:"modal-close"})},user:c.modalUser}))):e.requesting?n.a.createElement("div",null,"Fetching users."):n.a.createElement("div",null,"Error fetching users.")}),ot=r(129),ut=r.n(ot),st=["Submission Title","Submission Url","Plain Description","Built With","Desired Prizes"],lt=Object(u.b)(function(e){return{tableGroups:e.tableGroups,categories:e.categories}},function(e){return{fillCategories:function(t){e(se(t))},updateCategory:function(t){e(ue(t))},fillProjects:function(t){e($(t))},clearBallots:function(){e(Ue())}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"use-self-assign":return Object(d.a)({},e,{useSelfAssign:t.enabled});case"adjust-totals":return Object(d.a)({},e,{inputNumberExpos:t.numberExpos>0?t.numberExpos:1,totalProjectsToAccountFor:Math.ceil(e.csv.length/t.numberExpos)});case"adjust-counts":var r=Object(d.a)({},e.inputTableGroups,t.tableGroups);return Object(d.a)({},e,{inputTableGroups:r,totalProjectsAccountedFor:Object.values(r).reduce(function(e,t){return e+t},0)});case"update-csv":return Object(d.a)({},e,{csv:t.csv,csvHeaderIndicies:t.csvHeaderIndicies,totalProjectsToAccountFor:t.csv.length});case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{csv:[],csvHeaderIndicies:{},totalProjectsToAccountFor:-1,totalProjectsAccountedFor:0,inputNumberExpos:1,inputTableGroups:{},requesting:!1,useSelfAssign:!1},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=e.tableGroups;n.a.useEffect(function(){for(var t={},r=0,a=Object.values(e.tableGroups);r<a.length;r++)t[a[r].id]=10;c({type:"adjust-counts",tableGroups:t})},[o]),n.a.useEffect(function(){!function(){var t=Object(p.a)(i.a.mark(function t(){var r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/api/categories/allCategoriesCriteria");case 2:(r=t.sent).status&&(a=r.data,e.fillCategories(a));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[]);var u=function(){var t=Object(p.a)(i.a.mark(function t(){var r,n,o,u,s,l,p,m,g,f,v,j,h,y,E,O,w,P,x,k,C,I,D,S,q,G,T,B,N,J,A,R,L,U,M,F,_,Q,H,z,W,K,Y,V,X,$,Z,ee,te,re,ae,ne,ce,oe,ue,se;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:c({type:"request-start"}),e.fillProjects({}),r=new Set,n=!0,o=!1,u=void 0,t.prev=6,s=a.csv[Symbol.iterator]();case 8:if(n=(l=s.next()).done){t.next=35;break}if(p=l.value,!((m=p[a.csvHeaderIndicies["Desired Prizes"]]).length>0)){t.next=32;break}for(g=m.split(","),f=!0,v=!1,j=void 0,t.prev=16,h=g[Symbol.iterator]();!(f=(y=h.next()).done);f=!0)E=y.value,r.add(E.trim());t.next=24;break;case 20:t.prev=20,t.t0=t.catch(16),v=!0,j=t.t0;case 24:t.prev=24,t.prev=25,f||null==h.return||h.return();case 27:if(t.prev=27,!v){t.next=30;break}throw j;case 30:return t.finish(27);case 31:return t.finish(24);case 32:n=!0,t.next=8;break;case 35:t.next=41;break;case 37:t.prev=37,t.t1=t.catch(6),o=!0,u=t.t1;case 41:t.prev=41,t.prev=42,n||null==s.return||s.return();case 44:if(t.prev=44,!o){t.next=47;break}throw u;case 47:return t.finish(44);case 48:return t.finish(41);case 49:O=Object.values(e.categories.categories).reduce(function(e,t){return t.generated||e.push(t.name),e},[]),w=0,P=Array.from(r);case 51:if(!(w<P.length)){t.next=75;break}for(x=P[w],k=!0,C=!1,I=void 0,t.prev=56,D=O[Symbol.iterator]();!(k=(S=D.next()).done);k=!0)S.value===x&&r.delete(x);t.next=64;break;case 60:t.prev=60,t.t2=t.catch(56),C=!0,I=t.t2;case 64:t.prev=64,t.prev=65,k||null==D.return||D.return();case 67:if(t.prev=67,!C){t.next=70;break}throw I;case 70:return t.finish(67);case 71:return t.finish(64);case 72:w++,t.next=51;break;case 75:return t.next=77,b.a.delete("/api/categories/deleteGenerated");case 77:if(t.sent){t.next=80;break}return t.abrupt("return");case 80:return q=Array.from(r).map(function(e){return{name:e,isDefault:!1,generated:!0,isHidden:!1,description:"Sponsor prize generated when projects were uploaded. Do not remove. - ".concat(e),company:"",criteria:[]}}),t.next=83,b.a.post("/api/categories/update",{categories:q});case 83:if((G=t.sent).status){t.next=86;break}return t.abrupt("return");case 86:if(T=G.data,B=Object.values(e.categories.categories).reduce(function(e,t){return t.generated||(e[t.id]=t),e},{}),console.log("nongenerated",B,T),N=Object(d.a)({},B,T),e.fillCategories(Object(d.a)({},B,T)),J=Object.values(N).reduce(function(e,t){return e[t.name]=t,e},{}),A=Object.values(N).reduce(function(e,t){return t.isDefault&&e.push(t.id),e},[]),R=[],L=Object.values(e.tableGroups),U=L.map(function(e){return e.name}),M={},!a.useSelfAssign){t.next=114;break}F=0;case 99:if(!(F<a.csv.length)){t.next=114;break}if(_=a.csv[F],!(Q=_[a.csvHeaderIndicies["Table Number"]])){t.next=111;break}if(3===(H=Q.split(" ")).length){t.next=106;break}throw new Error("Need 3 parts: expo, group, number");case 106:if(!M[Q]){t.next=108;break}throw new Error("Duplicate table");case 108:if(U.includes(H[1])){t.next=110;break}throw new Error("Invalid table group name");case 110:M[Q]=F;case 111:F++,t.next=99;break;case 114:for(z=Object.values(M),W=0,K=1;K<=a.inputNumberExpos;K++)for(Y=0,V=L;Y<V.length;Y++)for(X=V[Y],$=1;$<=a.inputTableGroups[X.id];$++)if(Z="".concat(K," ").concat(X.name," ").concat($),void 0===M[Z]){for(;z.includes(W);)W++;a.csv[W]&&(M[Z]=W,z.push(W),W++)}else console.log("thegame",Z);for(console.log(M,z.sort(function(e,t){return e-t})),ee=Object.values(e.tableGroups).reduce(function(e,t){return e[t.name]=t,e},{}),te=0,re=Object.keys(M);te<re.length;te++)ae=re[te],ne=a.csv[M[ae]],ce=ae.split(" "),oe=ne[a.csvHeaderIndicies["Desired Prizes"]].split(",").reduce(function(e,t){return(t=t.trim())&&e.push(J[t.trim()].id),e},[]),R.push({name:ne[a.csvHeaderIndicies["Submission Title"]],devpostURL:ne[a.csvHeaderIndicies["Submission Url"]],expoNumber:parseInt(ce[0]),roundNumber:1,tableGroupID:ee[ce[1]].id,tableNumber:parseInt(ce[2]),roomUrl:"",categoryIDs:oe.concat(A),tags:[]});return console.log(R),t.next=123,b.a.post("/api/projects/upload",{projects:R});case 123:(ue=t.sent).status&&(se=ue.data,e.fillProjects(se),e.clearBallots(),e.closeModal(),c({type:"request-finish"}));case 125:case"end":return t.stop()}},t,null,[[6,37,41,49],[16,20,24,32],[25,,27,31],[42,,44,48],[56,60,64,72],[65,,67,71]])}));return function(){return t.apply(this,arguments)}}(),s=function(){c({type:"update-csv",csv:[],csvHeaderIndicies:{}}),e.closeModal()};return n.a.createElement(Q.a,{show:e.modalOpen,onHide:s},n.a.createElement(Q.a.Header,{closeButton:!0},n.a.createElement(Q.a.Title,null,"Upload Projects")),n.a.createElement(Q.a.Body,null,n.a.createElement(N.a,null,function(){var e=function(e){c({type:"update-csv",csv:[],csvHeaderIndicies:{}})},t=function(t){var r=t.data;if(r.length<1)return e();if(1===r.length)return e();for(var a=r[0],n={},o=0,u=st;o<u.length;o++){var s=u[o],l=a.indexOf(s);if(-1===l)return e();n[s]=l}n["Table Number"]=a.indexOf("Table Number"),r.splice(0,1),c({type:"update-csv",csv:r,csvHeaderIndicies:n})};return n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Devpost CSV"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(r){var a=r.target.files;if(1!==a.length)return e();var n=a[0];if(!n.name.endsWith(".csv"))return e();ut.a.parse(n,{complete:t,skipEmptyLines:!0})},type:"file"}),n.a.createElement(N.a.Text,{className:"text-muted"},"Please download the CSV containing all projects from Devpost and upload it here."))}(),function(){if(a.csv.length>0)return n.a.createElement("div",null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Number of Expos"),n.a.createElement(N.a.Control,{disabled:a.requesting,name:"numberExpos",onChange:function(e){c({type:"adjust-totals",numberExpos:e.target.value})},type:"number",value:""+a.inputNumberExpos}),n.a.createElement(N.a.Text,{className:"text-muted"},"How many expos will there be at this event?")),Object.values(e.tableGroups).map(function(e){return n.a.createElement(N.a.Group,{key:e.id},n.a.createElement(N.a.Label,null,"# ",n.a.createElement("strong",null,e.name)," Tables"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(t){c({type:"adjust-counts",tableGroups:Object(H.a)({},e.id,+t.target.value)})},type:"number",value:""+a.inputTableGroups[e.id]}),n.a.createElement(N.a.Text,{className:"text-muted"},"How many tables are available in the ",e.name," group in each expo?"))}),n.a.createElement("p",null,"Projects Accounted For: ",a.totalProjectsAccountedFor," / ",a.totalProjectsToAccountFor),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Check,{disabled:a.requesting,onChange:function(e){return c({type:"use-self-assign",enabled:"on"===e.target.value})},type:"checkbox",label:"Use Table Self-Assign"}),n.a.createElement(N.a.Text,{className:"text-muted"},'Check if you want to use the "Table Number" column in the Devpost submission.')))}())),n.a.createElement(Q.a.Footer,null,n.a.createElement(J.a,{disabled:a.requesting,onClick:s,variant:"secondary"},"Close & Discard"),n.a.createElement(J.a,{disabled:a.requesting,onClick:u,variant:"primary"},"Upload Projects")))}),it=r(123),dt=function(e){var t=function(t){var r=t.target;e.updateTableGroup(Object(d.a)({},e.tableGroup,Object(H.a)({},r.name,r.value)))};return n.a.createElement("div",{style:{marginBottom:12}},n.a.createElement("hr",null),n.a.createElement(N.a.Row,null,n.a.createElement(N.a.Group,{as:it.a,md:"7"},n.a.createElement(N.a.Label,null,"Table Group Name"),n.a.createElement(N.a.Control,{disabled:e.requesting,name:"name",onChange:t,value:e.tableGroup.name,placeholder:"Name"})),n.a.createElement(N.a.Group,{as:it.a,md:"2"},n.a.createElement(N.a.Label,null,"Shortcode"),n.a.createElement(N.a.Control,{disabled:e.requesting,name:"shortcode",onChange:t,value:e.tableGroup.shortcode,placeholder:"Code"})),n.a.createElement(N.a.Group,{as:it.a,md:"3"},n.a.createElement(N.a.Label,null,"Color"),n.a.createElement(N.a.Control,{disabled:e.requesting,name:"color",onChange:t,placeholder:"#000000",style:{backgroundColor:/^#[0-9A-F]{6}$/i.test(e.tableGroup.color)?e.tableGroup.color:"",color:/^#[0-9A-F]{6}$/i.test(e.tableGroup.color)?"#FFFFFF":"#000000"},value:e.tableGroup.color}))),n.a.createElement(J.a,{disabled:e.requesting,size:"sm",variant:"outline-danger",onClick:function(){return e.deleteTableGroup(e.tableGroup.id)}},"Delete"))};function pt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var mt,gt=Object(u.b)(function(e){return{tableGroups:e.tableGroups}},function(e){return{fillTableGroups:function(t){e(ge(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"increase-new-id":return Object(d.a)({},e,{currentNewID:e.currentNewID-1});case"update-table-group":return Object(d.a)({},e,{tableGroups:t.tableGroups});case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{currentNewID:-1,tableGroups:{},requesting:!1},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=e.tableGroups;n.a.useEffect(function(){c({type:"update-table-group",tableGroups:e.tableGroups})},[o]);var u=function(){var t=Object(p.a)(i.a.mark(function t(){var r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c({type:"request-start"}),t.next=4,b.a.post("/api/tableGroups/update",{tableGroups:Object.values(a.tableGroups)});case 4:(r=t.sent).status&&(n=r.data,e.fillTableGroups(n),e.closeModal(),c({type:"request-finish"})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Server error. Please try again."),window.location.reload();case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}();return n.a.createElement(Q.a,{show:e.modalOpen,onHide:e.closeModal},n.a.createElement(Q.a.Header,{closeButton:!0},n.a.createElement(Q.a.Title,null,"Manage Table Groups")),n.a.createElement(Q.a.Body,null,n.a.createElement("p",null,"Table groups are how your expo will be organized. Table groups can be a color, some fancy name, or a room number. You must have at least one table group in order to upload projects. "),n.a.createElement(N.a,null,function(){var e=function(e){c({type:"update-table-group",tableGroups:Object(d.a)({},a.tableGroups,Object(H.a)({},e.id,e))})},t=function(e){var t=a.tableGroups,r=(t[e],Object(g.a)(t,[e].map(pt)));c({type:"update-table-group",tableGroups:r})};return Object.values(a.tableGroups).length>0?Object.values(a.tableGroups).map(function(r){return n.a.createElement(dt,{key:r.id,tableGroup:r,requesting:a.requesting,updateTableGroup:e,deleteTableGroup:t})}):n.a.createElement("div",null,"No Table Groups")}()),n.a.createElement(J.a,{disabled:a.requesting,variant:"outline-primary",onClick:function(){var e=Object(d.a)({},ye,{id:a.currentNewID});c({type:"increase-new-id"}),c({type:"update-table-group",tableGroups:Object(d.a)({},a.tableGroups,Object(H.a)({},e.id,e))})}},"New Table Group")),n.a.createElement(Q.a.Footer,null,n.a.createElement(J.a,{disabled:a.requesting,onClick:e.closeModal,variant:"secondary"},"Close"),n.a.createElement(J.a,{disabled:a.requesting,onClick:u,variant:"primary"},"Save Changes")))}),ft=Object(u.b)(null,function(e){return{fillProjects:function(t){e($(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{requesting:!1},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=function(){var e=Object(p.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c({type:"request-start"});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return n.a.createElement(Q.a,{show:e.modalOpen,onHide:e.closeModal},n.a.createElement(Q.a.Header,{closeButton:!0},n.a.createElement(Q.a.Title,null,"Add Project")),n.a.createElement(Q.a.Body,null,n.a.createElement(N.a,null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Devpost CSV"),n.a.createElement(N.a.Control,{disabled:a.requesting,type:"file"}),n.a.createElement(N.a.Text,{className:"text-muted"},"Please download the CSV containing all projects from Devpost and upload it here.")))),n.a.createElement(Q.a.Footer,null,n.a.createElement(J.a,{disabled:a.requesting,onClick:e.closeModal,variant:"secondary"},"Close"),n.a.createElement(J.a,{disabled:a.requesting,onClick:o,variant:"primary"},"Save Changes")))}),bt=r(238),vt=r(232),jt=r(122),ht=r(230),yt=r(231),Et=Object(u.b)(function(e){return{categories:e.categories,ballots:e.ballots}},function(e){return{changeProjectRound:function(t,r){e(function(e,t){return function(){var r=Object(p.a)(i.a.mark(function r(a){var n,c;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b.a.post("/api/projects/changeProjectRound",{project:e,newRoundNumber:t});case 3:(n=r.sent).status&&(c=n.data,a(X(c))),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",Promise.resolve());case 11:case"end":return r.stop()}},r,null,[[0,7]])}));return function(e){return r.apply(this,arguments)}}()}(t,r))}}})(function(e){var t=n.a.useRef(n.a.createRef());return e.project?n.a.createElement("div",{key:e.project.id+" "+e.userID,onClick:e.onClick,onContextMenu:e.onContextMenu},n.a.createElement("div",{ref:t.current,key:e.project.id+" "+e.userID,id:e.project.id+" "+e.userID,className:"dot",style:{margin:2,width:60,height:60,background:e.tableGroup.color,opacity:e.dimmed?.5:1,color:"white",textAlign:"center",lineHeight:"40px",filter:e.selectedProject===e.project.id+" "+e.userID?"invert(30%)":"",userSelect:"none",MozUserSelect:"none",cursor:"pointer"},onClick:function(){return e.handleSelectedProjectChange(""+e.project.id)}},n.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",width:60,height:60,fontWeight:"bold",lineHeight:"initial"},className:"dot"},e.loading?n.a.createElement(A.a,{animation:"border",style:{gridRow:1,gridColumn:1}}):null,n.a.createElement("span",{style:{fontSize:10}},"E: ",e.project.expoNumber),n.a.createElement("span",{style:{fontSize:10}},"R: ",e.project.roundNumber),n.a.createElement("span",null,e.tableGroup.shortcode,e.project.tableNumber))),function(){var r={};if(e.ballots.dProjectScores[e.project.id]&&Object.values(e.ballots.dProjectScores[e.project.id]).length>0&&Object.values(e.categories.criteria).length>0)for(var a=0,c=Object.values(e.ballots.dProjectScores[e.project.id]);a<c.length;a++){var o=c[a],u=!0,s=!1,l=void 0;try{for(var i,d=o[Symbol.iterator]();!(u=(i=d.next()).done);u=!0){var p=i.value;r[e.categories.criteria[p.criteriaID].categoryID]||(r[e.categories.criteria[p.criteriaID].categoryID]={}),r[e.categories.criteria[p.criteriaID].categoryID][p.userID]||(r[e.categories.criteria[p.criteriaID].categoryID][p.userID]=0),r[e.categories.criteria[p.criteriaID].categoryID][p.userID]+=p.score}}catch(g){s=!0,l=g}finally{try{u||null==d.return||d.return()}finally{if(s)throw l}}}var m=function(t){e.changeProjectRound(e.project,e.project.roundNumber+t)};return n.a.createElement(ht.a,{show:e.selectedProject===e.project.id+" "+e.userID,target:t.current.current},n.a.createElement(yt.a,{id:"popover"+e.project.id},n.a.createElement("strong",null,e.project.name),n.a.createElement("p",null,n.a.createElement("a",{href:e.project.devpostURL,target:"_blank"},e.project.devpostURL),n.a.createElement("br",null),e.project.categoryIDs.reduce(function(t,r){if(e.categories.categories[r]){var a=e.categories.categories[r].generated?"secondary":e.categories.categories[r].isDefault?"success":"primary";t.push(n.a.createElement(F.a,{key:r,variant:a,style:{margin:"0 2px"}},e.categories.categories[r].name))}return t},[])),n.a.createElement("p",null,"Health: ",e.project.health),Object.keys(r).length>0?Object.keys(r).map(function(t){var a=Object.values(r[+t]);return n.a.createElement("p",{style:{margin:0},key:t},e.categories.categories[+t].name," - AVG: ",a.reduce(function(e,t){return e+t},0)/a.length," [",a.join(", "),"]")}):"No Scores",n.a.createElement("p",null,n.a.createElement("br",null),n.a.createElement("a",{href:e.project.roomUrl,target:"_blank"},"Join Meeting Room")),n.a.createElement("p",null,"Change Round"),n.a.createElement(J.a,{variant:"secondary",size:"sm",onClick:function(){return m(-1)},disabled:1==e.project.roundNumber},"Move Back 1")," ",n.a.createElement(J.a,{variant:"secondary",size:"sm",onClick:function(){return m(1)}},"Move Up 1")))}()):null}),Ot=function(e){return n.a.createElement("div",{className:"dot",style:{display:"inline-block",margin:2,minWidth:60,width:60,height:60,borderWidth:2,lineHeight:"40px",userSelect:"none",MozUserSelect:"none",cursor:"pointer",opacity:.5,borderStyle:e.solid?"solid":"dashed"}})};!function(e){e[e.Location=0]="Location",e[e.AverageScore=1]="AverageScore",e[e.ProjectHealth=2]="ProjectHealth",e[e.TimesJudged=3]="TimesJudged"}(mt||(mt={}));var wt,Pt=Object(u.b)(function(e){return{account:e.account,ballots:e.ballots,categories:e.categories,tableGroups:e.tableGroups,projects:e.projects,users:e.users}},function(e){return{queueProject:function(t,r){e(function(e,t){return{type:"QUEUE_PROJECT",result:{userID:t,projectID:e}}}(t,r))},queueProjectEmit:function(t,r){e(function(e,t){return console.log("wow",e,t),{event:"project-queue",emit:!0,payload:{eventID:Ce()(),projectID:e,userID:t}}}(t,r))},subscribeQueueProject:function(){e({event:"project-queue",handle:Ge})},subscribeQueuedProject:function(){e({event:"project-queued",handle:Te})},subscribeGotProject:function(){e({event:"project-got",handle:Ne})},subscribeScoreProject:function(){e({event:"project-score",handle:Be})},subscribeSkipProject:function(){e({event:"project-skip",handle:Ae})},subscribeMissingProject:function(){e({event:"project-missing",handle:Re})},subscribeBusyProject:function(){e({event:"project-busy",handle:Je})},unsubscribeAll:function(){e({event:"empty",leave:!0})},requestFinish:function(){e(Pe())},requestStart:function(){e(we())}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"change-current-expo":return Object(d.a)({},e,{currentExpo:t.currentExpo>0?t.currentExpo:1});case"change-current-round":return Object(d.a)({},e,{currentRound:t.currentRound>0?t.currentRound:1});case"change-selected-project":return Object(d.a)({},e,{selectedProject:t.projectID,judgeSelectedProject:""});case"change-judge-selected-project":return Object(d.a)({},e,{selectedProject:"",judgeSelectedProject:t.projectID});case"change-sort-by":return Object(d.a)({},e,{sortBy:t.sortBy});case"change-filter-by":return Object(d.a)({},e,{filterBy:t.filterBy});case"update-projects":return Object(d.a)({},e,{projects:t.projects});case"change-parameters":return Object(d.a)({},e,{powerGoodness:t.goodness>0?t.goodness:0,powerVariance:t.variance>0?t.variance:0,powerSkip:t.skip>0?t.skip:0});default:return e}},{currentExpo:1,currentRound:1,selectedProject:"",judgeSelectedProject:"",powerGoodness:.5,powerSkip:.5,powerVariance:.5,projects:{},sortBy:mt.Location,filterBy:void 0}),r=Object(m.a)(t,2),a=r[0],c=r[1];n.a.useEffect(function(){for(var t={},r=0,a=Object.keys(e.projects);r<a.length;r++){var n=a[r];t[+n]=Object(d.a)({},e.projects[+n],{health:o(e.projects[+n])})}c({type:"update-projects",projects:t})},[e.projects,a.powerGoodness,a.powerSkip,a.powerVariance,e.ballots]);var o=function(t){for(var r=0,a=0,n=Object.values(e.ballots.dJudgeQueues);a<n.length;a++){var c=n[a];c.queuedProject&&c.queuedProject.id===t.id&&r++,c.activeProjectID===t.id&&(r+=2),c.otherProjectIDs.includes(t.id)&&(r+=2)}return r},u=function(t,r){var a=0,n=!0,c=!1,o=void 0;try{for(var u,s=Object.keys(e.ballots.dJudgeQueues).map(Number)[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var l=u.value;if(e.users[l].company===r){var i=e.ballots.dJudgeQueues[l];i.queuedProject&&i.queuedProject.id===t.id&&a++,i.activeProjectID===t.id&&(a+=2),i.otherProjectIDs.includes(t.id)&&(a+=2)}}}catch(d){c=!0,o=d}finally{try{n||null==s.return||s.return()}finally{if(c)throw o}}return a},s=function(t){if(!e.ballots.dProjectScores[t])return 0;for(var r=Object(H.a)({},t,{}),n=Object.values(e.categories.categories).filter(function(e){return a.filterBy?e.id===a.filterBy:e.isDefault})[0].id,c=0,o=Object.values(e.ballots.dProjectScores[t]);c<o.length;c++){var u=o[c],s=!0,l=!1,i=void 0;try{for(var d,p=u[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var m=d.value;m.status===be.Submitted&&e.categories.criteria[m.criteriaID].categoryID===n&&(r[m.projectID][m.userID]||(r[m.projectID][m.userID]=0),r[m.projectID][m.userID]+=m.score)}}catch(b){l=!0,i=b}finally{try{s||null==p.return||p.return()}finally{if(l)throw i}}}var g=Object.values(r[t]),f=g.reduce(function(e,t){return e+t},0)/(g.length>0?g.length:1);return console.log(f),f},l=function(){var t=Object(p.a)(i.a.mark(function t(){var r,a,n,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],a=0,n=Object.keys(e.projects);a<n.length;a++)c=n[a],s(parseInt(c))>=.5&&r.push(e.projects[parseInt(c)]);return t.prev=3,t.next=6,b.a.post("/api/projects/changeProjectRounds",{projects:r,newRoundNumber:2});case 6:t.sent.status&&(alert("Projects moved to round 2!"),window.location.reload()),t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(3),alert("Error moving projects!"),console.log(t.t0),t.abrupt("return",Promise.resolve());case 15:case"end":return t.stop()}},t,null,[[3,10]])}));return function(){return t.apply(this,arguments)}}();document.onkeypress=function(t){" "===t.key&&(t.preventDefault(),function(){var t=Object.keys(e.users).map(function(e){return parseInt(e)}).reduce(function(t,r){return e.users[r].isJudging&&(e.ballots.dJudgeQueues[r]&&void 0!==e.ballots.dJudgeQueues[r].queuedProject&&0!==e.ballots.dJudgeQueues[r].queuedProject.id||t.push(r)),t},[]);if(console.log("User IDS",t),t.length>0){var r=t[Math.floor(Math.random()*t.length)];console.log("Random judge",r);var n=e.users[r].company,c=Object.values(a.projects).filter(function(t){return t.expoNumber==a.currentExpo&&t.roundNumber===a.currentRound&&(!e.ballots.dJudgeQueues[r]||t.id!==e.ballots.dJudgeQueues[r].activeProjectID&&!e.ballots.dJudgeQueues[r].otherProjectIDs.includes(t.id))&&t.categoryIDs.map(function(t){return e.categories.categories[t].company}).includes(e.users[r].company)}).sort(function(e,t){return u(e,n)-u(t,n)});if(console.log("Projects to be assigned",c),c.length>0){var o=u(c[0],n),s=c.filter(function(e){return u(e,n)===o});g(s[Math.floor(Math.random()*s.length)].id,r)}}}())},n.a.useEffect(function(){var t=function(e){console.log(e.target.className),"dot"===e.target.className||e.target.className.includes("judge")||f()},r=function(e){"Escape"===e.key&&f()};return document.addEventListener("mousedown",t),document.addEventListener("keydown",r),e.subscribeQueueProject(),e.subscribeQueuedProject(),e.subscribeGotProject(),e.subscribeScoreProject(),e.subscribeBusyProject(),e.subscribeMissingProject(),e.subscribeSkipProject(),function(){document.removeEventListener("mousedown",t),document.removeEventListener("keydown",r),e.unsubscribeAll()}},[]);var g=function(t,r){e.queueProject(t,r),e.queueProjectEmit(t,r)},f=function(){c({type:"change-selected-project",projectID:""})};return n.a.createElement(n.a.Fragment,null,n.a.createElement(bt.a,null,n.a.createElement(_.a,null,n.a.createElement(bt.a.Toggle,{as:_.a.Header,eventKey:"0"},"Filter/Sort"),n.a.createElement(bt.a.Collapse,{eventKey:"0"},n.a.createElement(_.a.Body,null,n.a.createElement("h2",null,"Sort"),n.a.createElement(J.a,{size:"sm",onClick:function(){return c({type:"change-sort-by",sortBy:mt.Location})}},"By Location"),n.a.createElement(J.a,{size:"sm",onClick:function(){return c({type:"change-sort-by",sortBy:mt.AverageScore})}},"By Average Score"),n.a.createElement(J.a,{size:"sm",onClick:function(){return c({type:"change-sort-by",sortBy:mt.ProjectHealth})}},"By Project Health"),n.a.createElement(J.a,{size:"sm",onClick:function(){return c({type:"change-sort-by",sortBy:mt.TimesJudged})}},"By Times Judged (Includes Pending/Assigned)"),n.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},"Currently sorting ",n.a.createElement("strong",null,"By ",mt[a.sortBy])),n.a.createElement("h2",null,"Filter"),Object.values(e.categories.categories).reduce(function(e,t){return t.generated||e.push(n.a.createElement(J.a,{key:t.id,size:"sm",onClick:function(){return c({type:"change-filter-by",filterBy:t.id})}},"By ",t.name)),e},[]),a.filterBy&&n.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},"Currently filtering ",n.a.createElement("strong",null,"By ",Object.values(e.categories.categories).find(function(e){return e.id===a.filterBy}).name))))),n.a.createElement(_.a,null,n.a.createElement(bt.a.Toggle,{as:_.a.Header,eventKey:"1"},"Expo ",a.currentExpo," | Round ",a.currentRound),n.a.createElement(bt.a.Collapse,{eventKey:"1"},n.a.createElement(_.a.Body,null,n.a.createElement(vt.a,{className:"mb-3",style:{maxWidth:150,marginRight:10}},n.a.createElement(vt.a.Text,null,"Expo #"),n.a.createElement(jt.a,{onChange:function(e){return c({type:"change-current-expo",currentExpo:+e.target.value})},type:"number",value:""+a.currentExpo})),n.a.createElement(vt.a,{className:"mb-3",style:{maxWidth:150,marginRight:10}},n.a.createElement(vt.a.Text,null,"Round #"),n.a.createElement(jt.a,{onChange:function(e){return c({type:"change-current-round",currentRound:+e.target.value})},type:"number",value:""+a.currentRound}))))),n.a.createElement(_.a,null,n.a.createElement(bt.a.Toggle,{as:_.a.Header,eventKey:"2"},"Bulk Move Projects"),n.a.createElement(bt.a.Collapse,{eventKey:"2"},n.a.createElement(_.a.Body,null,n.a.createElement(J.a,{size:"sm",onClick:function(){window.confirm("This operation will move all projects with score >=0.5 to round 2. Continue?")&&l()}},"Move Projects to Round 2"))))),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",margin:"12px auto 0"}},function(){var t=function(){var e=Object(p.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.selectedProject===t?c({type:"change-selected-project",projectID:""}):c({type:"change-selected-project",projectID:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(Object.values(e.tableGroups).length>0&&Object.values(a.projects).length>0){var r=Object.values(a.projects).filter(function(e){return!a.filterBy||e.categoryIDs.includes(a.filterBy)}).sort(function(t,r){var n;switch(a.sortBy){case mt.AverageScore:if(!e.ballots.dProjectScores[t.id]&&!e.ballots.dProjectScores[r.id])return 0;if(!e.ballots.dProjectScores[r.id])return-1;if(!e.ballots.dProjectScores[t.id])return 1;var c=(n={},Object(H.a)(n,t.id,{}),Object(H.a)(n,r.id,{}),n),o=Object.values(e.categories.categories).filter(function(e){return a.filterBy?e.id===a.filterBy:e.isDefault})[0].id,u=Object.values(e.ballots.dProjectScores[t.id]).concat(Object.values(e.ballots.dProjectScores[r.id])),s=!0,l=!1,i=void 0;try{for(var d,p=u[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var m=d.value,g=!0,f=!1,b=void 0;try{for(var v,j=m[Symbol.iterator]();!(g=(v=j.next()).done);g=!0){var h=v.value;h.status===be.Submitted&&e.categories.criteria[h.criteriaID].categoryID===o&&(c[h.projectID][h.userID]||(c[h.projectID][h.userID]=0),c[h.projectID][h.userID]+=h.score)}}catch(P){f=!0,b=P}finally{try{g||null==j.return||j.return()}finally{if(f)throw b}}}}catch(P){l=!0,i=P}finally{try{s||null==p.return||p.return()}finally{if(l)throw i}}var y=Object.values(c[t.id]),E=Object.values(c[r.id]);console.log(y,E);var O=y.reduce(function(e,t){return e+t},0)/(y.length>0?y.length:1),w=E.reduce(function(e,t){return e+t},0)/(E.length>0?E.length:1);return console.log(O,w),O<w?1:-1;case mt.ProjectHealth:return t.health-r.health;default:return 1e3*t.tableGroupID+t.tableNumber-(1e3*r.tableGroupID+r.tableNumber)}}).reduce(function(r,c){var o=e.tableGroups[c.tableGroupID];return c.expoNumber===a.currentExpo&&c.roundNumber===a.currentRound&&r.push(n.a.createElement(Et,{key:c.id,dimmed:!1,loading:!1,userID:0,project:c,tableGroup:o,selectedProject:a.selectedProject+" 0",handleSelectedProjectChange:t})),r},[]);return 0===r.length?n.a.createElement("p",null,"No projects in this expo/round."):r}}()),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",margin:"12px auto 0"}},function(){var t=function(){var e=Object(p.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.judgeSelectedProject===t?c({type:"change-judge-selected-project",projectID:""}):c({type:"change-judge-selected-project",projectID:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return Object.values(e.users).sort(function(e,t){return e.company<t.company?-1:1}).reduce(function(r,c){return c.isJudging&&r.push(n.a.createElement(_.a,{key:c.id,className:"judge",style:{width:220,margin:5,cursor:"pointer"},onClick:function(){return t=c.id,console.log(a.selectedProject),0===a.selectedProject.length?null:e.ballots.dJudgeQueues[t]&&e.ballots.dJudgeQueues[t].activeProjectID===+a.selectedProject||e.ballots.dJudgeQueues[t]&&e.ballots.dJudgeQueues[t].otherProjectIDs.includes(+a.selectedProject)?null:void(e.projects[+a.selectedProject].categoryIDs.map(function(r){return e.categories.categories[r].company===e.users[t].company}).includes(!0)&&(g(+a.selectedProject,t),f()));var t}},n.a.createElement(_.a.Body,{className:"judge"},n.a.createElement(_.a.Title,{className:"judge"},c.name),n.a.createElement(_.a.Subtitle,{className:"mb-2 text-muted"},c.company),n.a.createElement("div",{style:{display:"flex",flexFlow:"wrap"}},function(r){var c=[];if(e.ballots.dJudgeQueues[r]){var o=e.ballots.dJudgeQueues[r].queuedProject;o&&0!==o.id&&e.projects[o.id]?c.push(n.a.createElement(Et,{key:o.id,dimmed:!1,loading:o.pending,tableGroup:e.tableGroups[e.projects[o.id].tableGroupID],project:a.projects[o.id],userID:r,selectedProject:a.judgeSelectedProject,onContextMenu:function(e){return console.log(e.type),e.preventDefault(),!1},handleSelectedProjectChange:function(){return t(o.id+" "+r)}})):c.push(n.a.createElement(Ot,{solid:!0,key:-1}));var u=e.ballots.dJudgeQueues[r].activeProjectID;u&&e.projects[u]?c.push(n.a.createElement(Et,{key:u,dimmed:!1,loading:!1,tableGroup:e.tableGroups[e.projects[u].tableGroupID],project:a.projects[u],selectedProject:a.judgeSelectedProject,userID:r,handleSelectedProjectChange:function(){return t(u+" "+r)}})):c.push(n.a.createElement(Ot,{solid:!1,key:-2}));var s=e.ballots.dJudgeQueues[r].otherProjectIDs;if(s){var l=[],i=!0,d=!1,p=void 0;try{for(var m,g=function(){var c=m.value;e.projects[c]&&l.push(n.a.createElement(Et,{key:c+" "+r,dimmed:!0,loading:!1,tableGroup:e.tableGroups[e.projects[c].tableGroupID],project:a.projects[c],userID:r,selectedProject:a.judgeSelectedProject,handleSelectedProjectChange:function(){return t(c+" "+r)}}))},f=s[Symbol.iterator]();!(i=(m=f.next()).done);i=!0)g()}catch(b){d=!0,p=b}finally{try{i||null==f.return||f.return()}finally{if(d)throw p}}c.push(l.reverse())}}else c.push([n.a.createElement(Ot,{solid:!0,key:-1}),n.a.createElement(Ot,{solid:!1,key:-2})]);return c}(c.id))))),r},[])}()))});!function(e){e[e.UploadProjects=0]="UploadProjects",e[e.AddProject=1]="AddProject",e[e.ManageTableGroups=2]="ManageTableGroups",e[e.None=3]="None"}(wt||(wt={}));var xt=Object(u.b)(function(e){return{categories:e.categories,requesting:e.requesting,tableGroups:e.tableGroups,projects:e.projects,users:e.users}},function(e){return{fetchBallots:function(){return e(Me())},fetchTableGroups:function(){return e(fe())},fetchProjects:function(){return e(Z())},fetchUsers:function(){return e(Xe())},requestFinish:function(){return e(Pe())},requestStart:function(){return e(we())}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"modal-close":return Object(d.a)({},e,{modalOpen:wt.None});case"modal-open":return Object(d.a)({},e,{modalOpen:t.modal});default:return e}},{modalOpen:wt.None},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=function(){return c({type:"modal-close"})};n.a.useEffect(function(){var t=function(){var t=Object(p.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.requestStart(),t.next=3,Promise.all([e.fetchBallots(),e.fetchTableGroups(),e.fetchProjects(),e.fetchUsers()]);case 3:e.requestFinish();case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();Object.values(e.users).length>0&&Object.values(e.projects).length>0&&Object.values(e.tableGroups).length>0||t()},[]);return n.a.createElement("div",{style:{margin:"12px"}},n.a.createElement("h1",{style:{textAlign:"center"}},"Projects"),e.requesting?"Loading":0===Object.values(e.users).length?"Loading":n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"}},n.a.createElement(je.a,null,n.a.createElement(J.a,{onClick:Object(p.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("This operation will replace all existing projects and generated categories. Continue?")){e.next=5;break}return e.next=3,b.a.get("/api/submit/import/true/false");case 3:(t=e.sent).status?(r=t.data,console.log(r),alert("Projects and categories imported!"),window.location.reload()):alert("Import error!");case 5:case"end":return e.stop()}},e)})),size:"sm"},"Import Projects and Categories"),n.a.createElement(J.a,{onClick:Object(p.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("This operation will replace all existing projects. Continue?")){e.next=5;break}return e.next=3,b.a.get("/api/submit/import/false/false");case 3:(t=e.sent).status?(r=t.data,console.log(r),alert("Projects imported!"),window.location.reload()):alert("Import error!");case 5:case"end":return e.stop()}},e)})),size:"sm"},"Import Projects"),n.a.createElement(J.a,{onClick:Object(p.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("This operation will replace all existing projects and generated categories. Continue?")){e.next=5;break}return e.next=3,b.a.get("/api/submit/import/true/true");case 3:(t=e.sent).status?(r=t.data,console.log(r),alert("Projects and categories imported!"),window.location.reload()):alert("Import error!");case 5:case"end":return e.stop()}},e)})),size:"sm"},"Import Accepted Projects and Categories"),n.a.createElement(J.a,{onClick:Object(p.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("This operation will replace all existing projects. Continue?")){e.next=5;break}return e.next=3,b.a.get("/api/submit/import/false/true");case 3:(t=e.sent).status?(r=t.data,console.log(r),alert("Projects imported!"),window.location.reload()):alert("Import error!");case 5:case"end":return e.stop()}},e)})),size:"sm"},"Import Accepted Projects"),n.a.createElement(J.a,{onClick:Object(p.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("This operation will accept projects in Submit. Continue?")){e.next=5;break}return e.next=3,b.a.get("/api/submit/accept");case 3:(t=e.sent).status?(r=t.data,console.log(r),alert("Projects accepted!")):alert("Acceptance error!");case 5:case"end":return e.stop()}},e)})),size:"sm"},"Accept Projects to Submit"),n.a.createElement(J.a,{onClick:function(){return c({type:"modal-open",modal:wt.UploadProjects})},size:"sm"},"Upload Projects"),n.a.createElement(J.a,{onClick:function(){return c({type:"modal-open",modal:wt.ManageTableGroups})},variant:Object.values(e.tableGroups).length>0||e.requesting?"outline-primary":"danger",size:"sm"},"Manage Table Groups"),n.a.createElement(J.a,{onClick:function(){return c({type:"modal-open",modal:wt.AddProject})},variant:"outline-primary",size:"sm"},"Add Project"))),n.a.createElement("div",{style:{margin:"12px auto 0"}},0!==Object.values(e.projects).length&&0!==Object.values(e.tableGroups).length&&0!==Object.values(e.categories.criteria).length?n.a.createElement(Pt,null):null)),n.a.createElement(lt,{modalOpen:a.modalOpen===wt.UploadProjects,closeModal:o}),n.a.createElement(gt,{modalOpen:a.modalOpen===wt.ManageTableGroups,closeModal:o}),n.a.createElement(ft,{modalOpen:a.modalOpen===wt.AddProject,closeModal:o}))}),kt={name:"",isDefault:!1,generated:!1,isHidden:!1,description:"",company:"",criteria:function(){var e={};return e[-1]=Ct(-1),e}()};function Ct(e){return{id:e,name:"",rubric:"",minScore:1,maxScore:10,categoryID:-1}}var It=function(e){var t=function(t){var r=t.target;e.updateCriteria(Object(d.a)({},e.criteria,Object(H.a)({},r.name,r.value)))};return n.a.createElement("div",{style:{marginBottom:12}},n.a.createElement("hr",null),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Criteria Name"),n.a.createElement(N.a.Control,{disabled:e.requesting,name:"name",onChange:t,value:e.criteria.name,placeholder:"Name"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Rubric"),n.a.createElement(N.a.Control,{as:"textarea",disabled:e.requesting,name:"rubric",onChange:t,value:e.criteria.rubric,placeholder:"Rubric"})),n.a.createElement(N.a.Row,null,n.a.createElement(N.a.Group,{as:it.a},n.a.createElement(N.a.Label,null,"Min Score"),n.a.createElement(N.a.Control,{disabled:e.requesting,name:"minScore",onChange:t,type:"number",value:""+e.criteria.minScore})),n.a.createElement(N.a.Group,{as:it.a},n.a.createElement(N.a.Label,null,"Max Score"),n.a.createElement(N.a.Control,{disabled:e.requesting,name:"maxScore",onChange:t,type:"number",value:""+e.criteria.maxScore}))),n.a.createElement(J.a,{disabled:e.requesting,onClick:function(){return e.deleteCriteria(e.criteria.id)},size:"sm",variant:"outline-danger"},"Delete Criteria"))};function Dt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var St=Object(u.b)(null,function(e){return{updateCategory:function(t){e(ue(t))},requestFinish:function(){e(Pe())},requestStart:function(){e(we())}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"increase-new-category-id":return Object(d.a)({},e,{currentNewCategoryID:e.currentNewCategoryID-1});case"update-category":return Object(d.a)({},e,{category:t.category});default:return e}},{requesting:!1,category:e.category,currentNewCategoryID:-2},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1],o=e.category;n.a.useEffect(function(){c({type:"update-category",category:e.category})},[o]);var u=function(){var t=Object(p.a)(i.a.mark(function t(){var r,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.requestStart(),t.next=4,b.a.post("/api/categories/update",{categories:[Object(d.a)({},a.category,{criteria:Object.values(a.category.criteria).map(function(e){return{name:e.name,rubric:e.rubric,minScore:e.minScore,maxScore:e.maxScore}})})]});case 4:(r=t.sent).status&&(n=r.data,e.updateCategory(n),e.closeModal(),e.requestFinish()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Server error. Please try again."),window.location.reload();case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),s=function(){var e=a.category.criteria;e[a.currentNewCategoryID]=Ct(a.currentNewCategoryID),c({type:"increase-new-category-id"}),c({type:"update-category",category:Object(d.a)({},a.category,{criteria:e})})};return n.a.createElement(Q.a,{show:e.modalOpen,onHide:e.closeModal},n.a.createElement(Q.a.Header,{closeButton:!0},n.a.createElement(Q.a.Title,null,"Edit Category")),n.a.createElement(Q.a.Body,null,n.a.createElement(N.a,null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Category Name"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"update-category",category:Object(d.a)({},a.category,{name:e.target.value})})},value:a.category.name,type:"text",placeholder:"Name"}),n.a.createElement(N.a.Text,{className:"text-muted"},"If you are using Ballot for optional prizes, this name needs to match the Devpost output.")),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Check,{disabled:a.requesting,checked:a.category.isDefault,onChange:function(e){return c({type:"update-category",category:Object(d.a)({},a.category,{isDefault:e.target.checked})})},type:"checkbox",label:"Default Category"}),n.a.createElement(N.a.Text,{className:"text-muted"},"Check this box if all submissions are eligible for this category.")),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Check,{disabled:a.requesting,checked:a.category.isHidden,onChange:function(e){return c({type:"update-category",category:Object(d.a)({},a.category,{isHidden:e.target.checked})})},type:"checkbox",label:"Hidden Category"}),n.a.createElement(N.a.Text,{className:"text-muted"},"Check this box if this is a hidden category.")),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Company"),n.a.createElement(N.a.Control,{disabled:a.requesting,name:"company",onChange:function(e){return c({type:"update-category",category:Object(d.a)({},a.category,{company:e.target.value})})},value:a.category.company,placeholder:"Company"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Category Description"),n.a.createElement(N.a.Control,{as:"textarea",disabled:a.requesting,name:"description",onChange:function(e){return c({type:"update-category",category:Object(d.a)({},a.category,{description:e.target.value})})},value:a.category.description,placeholder:"Description"})),function(){var e=function(e){c({type:"update-category",category:Object(d.a)({},a.category,{criteria:Object(d.a)({},a.category.criteria,Object(H.a)({},e.id,e))})})},t=function(e){var t=a.category.criteria,r=(t[e],Object(g.a)(t,[e].map(Dt)));c({type:"update-category",category:Object(d.a)({},a.category,{criteria:r})})};return Object.values(a.category.criteria).map(function(r){return n.a.createElement(It,{key:r.id,criteria:r,requesting:a.requesting,updateCriteria:e,deleteCriteria:t})})}(),n.a.createElement(J.a,{disabled:a.requesting,variant:"outline-primary",onClick:s},"New Criteria"))),n.a.createElement(Q.a.Footer,null,n.a.createElement(J.a,{disabled:a.requesting,onClick:e.closeModal,variant:"secondary"},"Close"),n.a.createElement(J.a,{disabled:a.requesting,onClick:u,variant:"primary"},"Save Changes")))}),qt=r(133),Gt=r(233),Tt=Object(u.b)(function(e){return{requesting:e.requesting}},function(e){return{deleteCategory:function(t){e(function(e){return{type:re,categoryID:e}}(t))},requestFinish:function(){e(Pe())},requestStart:function(){e(we())}}})(function(e){var t=function(){var t=Object(p.a)(i.a.mark(function t(r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),e.requestStart(),t.next=4,b.a.post("/api/categories/delete",{categoryID:e.category.id});case 4:t.sent.status&&(e.deleteCategory(e.category.id),e.requestFinish());case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(_.a,{style:{width:"44rem",margin:"12px"}},n.a.createElement(_.a.Body,null,n.a.createElement(_.a.Title,null,e.category.name,n.a.createElement("span",{style:{margin:"0 5px"}},e.category.isDefault?n.a.createElement(F.a,{variant:"primary"},"Default"):n.a.createElement(n.a.Fragment,null),e.category.generated?n.a.createElement(F.a,{variant:"secondary"},"Generated"):n.a.createElement(n.a.Fragment,null)),n.a.createElement("span",null,e.category.isHidden?n.a.createElement(F.a,{variant:"primary"},"Hidden"):n.a.createElement(n.a.Fragment,null)),n.a.createElement("br",null),n.a.createElement("h6",null,e.category.company)),n.a.createElement(_.a.Text,{style:{whiteSpace:"pre-wrap"}},e.category.description)),n.a.createElement(Gt.a,{className:"list-group-flush"},function(){if(e.category.criteria)return Object.values(e.category.criteria).map(function(e){return n.a.createElement(qt.a,{key:e.id},n.a.createElement("h6",null,e.name),n.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},"Scored: ",e.minScore," - ",e.maxScore,n.a.createElement("br",null),e.rubric))})}()),n.a.createElement(_.a.Body,null,n.a.createElement(je.a,null,n.a.createElement(J.a,{disabled:e.requesting,onClick:function(t){return e.openModal(t,e.category)},size:"sm",variant:"primary"},"Edit"),n.a.createElement(J.a,{disabled:e.requesting,onClick:t,size:"sm",variant:"outline-danger"},"Delete"))))}),Bt=Object(u.b)(function(e){return{categories:e.categories}},function(e){return{fillCategories:function(t){e(se(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"modal-open":return Object(d.a)({},e,{modalOpen:!0,modalCategory:t.modalCategory});case"modal-close":return Object(d.a)({},e,{modalOpen:!1});case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{modalCategory:kt,modalOpen:!1,requesting:!1},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1];n.a.useEffect(function(){o()},[]);var o=function(){var t=Object(p.a)(i.a.mark(function t(){var r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"request-start"}),t.next=3,b.a.get("/api/categories/allCategoriesCriteria");case 3:(r=t.sent).status&&(a=r.data,e.fillCategories(a),c({type:"request-finish"}));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{style:{margin:"12px"}},n.a.createElement("h1",{style:{textAlign:"center"}},"Categories"),n.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.a.createElement(J.a,{size:"sm",onClick:function(){return c({type:"modal-open",modalCategory:kt})}},"New Category")),n.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",maxWidth:1e3,margin:"12px auto 0"}},function(){for(var t=function(e,t){e.preventDefault(),c({type:"modal-open",modalCategory:t})},r=[],a=[],o=0,u=Object.values(e.categories.categories);o<u.length;o++){var s=u[o];s.generated?a.push(n.a.createElement(Tt,{key:s.id,category:s,openModal:t})):r.push(n.a.createElement(Tt,{key:s.id,category:s,openModal:t}))}return n.a.createElement(n.a.Fragment,null,r,a)}(),n.a.createElement(St,{modalOpen:a.modalOpen,category:a.modalCategory,closeModal:function(){return c({type:"modal-close"})}})))}),Nt=r(234),Jt=Object(u.b)(function(e){return{ballots:e.ballots,categories:e.categories,requesting:e.requesting,tableGroups:e.tableGroups,projects:e.projects,users:e.users}},function(e){return{fetchBallots:function(){return e(Me())},fetchTableGroups:function(){return e(fe())},fetchProjects:function(){return e(Z())},fetchUsers:function(){return e(Xe())},fetchCategories:function(){return e(le())},fetchCompanies:function(){return e(nt())},requestFinish:function(){return e(Pe())},requestStart:function(){return e(we())}}})(function(e){return n.a.useEffect(function(){var t=function(){var t=Object(p.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.requestStart(),t.next=3,Promise.all([e.fetchBallots(),e.fetchTableGroups(),e.fetchProjects(),e.fetchUsers(),e.fetchCompanies(),e.fetchCategories()]);case 3:e.requestFinish();case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();Object.values(e.users).length>0&&Object.values(e.projects).length>0&&Object.values(e.tableGroups).length>0||t()},[]),e.requesting?n.a.createElement("h1",null,"Loading"):(console.log(e),n.a.createElement("div",{style:{margin:"12px"}},n.a.createElement("h1",{style:{textAlign:"center"}},"Dashboard"),Object.values(e.projects).map(function(t){return n.a.createElement("div",null,n.a.createElement("h3",null,t.id," - ",t.name),t.categoryIDs.map(function(r){if(!e.categories.categories[r])return n.a.createElement("h5",null,"Category ID: ",r);if(!e.ballots.dProjectScores[t.id])return n.a.createElement("h5",null,e.categories.categories[r].name);var a=Object.values(e.categories.categories[r].criteria).map(function(e){return e.id}),c=Object.values(e.categories.categories[r].criteria).map(function(e){return e.name});return n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",null,e.categories.categories[r].name),n.a.createElement(Nt.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Judge"),c.map(function(e){return n.a.createElement("th",null,e)}),n.a.createElement("th",null,"Total"))),n.a.createElement("tbody",null,Object.values(e.ballots.dProjectScores[t.id]).map(function(t){var r=[],c=!0,o=!1,u=void 0;try{for(var s,l=function(){var e=s.value,a=t.find(function(t){return t.criteriaID==e});a&&r.push(a.score)},i=a[Symbol.iterator]();!(c=(s=i.next()).done);c=!0)l()}catch(d){o=!0,u=d}finally{try{c||null==i.return||i.return()}finally{if(o)throw u}}return r.length==a.length?n.a.createElement("tr",null,n.a.createElement("td",null,e.users[t[0].userID].name),r.map(function(e){return n.a.createElement("td",null,e)}),n.a.createElement("td",null,r.reduce(function(e,t){return e+t},0))):null}))))}))})))}),At="/admin",Rt=Object(u.b)(function(e){return{account:e.account}},function(e){return{loginUser:function(t){e(D(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{requesting:!1},void 0),r=Object(m.a)(t,2);r[0],r[1];return n.a.createElement("div",null,n.a.createElement(He,null),n.a.createElement(v.d,null,n.a.createElement(v.b,{path:"".concat(At,"/users"),component:ct}),n.a.createElement(v.b,{path:"".concat(At,"/categories"),component:Bt}),n.a.createElement(v.b,{path:"".concat(At,"/dashboard"),component:Jt}),n.a.createElement(v.b,{exact:!0,path:"".concat(At),component:xt}),n.a.createElement(v.a,{to:"".concat(At)})))}),Lt=Object(u.b)(function(e){return{account:e.account,companies:e.companies}},function(e){return{fetchCompanies:function(){e(nt())},loginUser:function(t){e(D(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"change-error":return Object(d.a)({},e,{error:t.error,requesting:!1});case"change-inputs":return Object(d.a)({},e,{inputs:Object(d.a)({},e.inputs,t.inputs)});case"request-start":return Object(d.a)({},e,{requesting:!0,error:{name:"",message:""}});case"request-success":return Object(d.a)({},e,{success:!0,requesting:!1});case"request-finish":return Object(d.a)({},e,{requesting:!1,success:!1});default:return e}},{requesting:!1,inputs:{name:"",email:"",password:"",passwordConfirm:"",company:""},error:{name:"",message:""},success:!1},void 0),r=Object(m.a)(t,2),a=r[0],c=r[1];n.a.useEffect(function(){e.fetchCompanies()},[]);var o=function(){var e=Object(p.a)(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=/^[a-zA-Z0-9\-_]+(\.[a-zA-Z0-9\-_]+)*@[a-z0-9]+(-[a-z0-9]+)*(\.[a-z0-9]+(-[a-z0-9]+)*)*\.[a-z]{2,4}$/,0!==a.inputs.name.length&&0!==a.inputs.email.length&&0!==a.inputs.password.length&&0!==a.inputs.passwordConfirm.length){e.next=5;break}return c({type:"change-error",error:{name:"Error Creating Account",message:"One or more fields were left blank."}}),e.abrupt("return");case 5:if(r.test(a.inputs.email)){e.next=8;break}return c({type:"change-error",error:{name:"Error Creating Account",message:"Your email is invalid."}}),e.abrupt("return");case 8:if(a.inputs.password===a.inputs.passwordConfirm){e.next=11;break}return c({type:"change-error",error:{name:"Error Creating Account",message:"Your passwords do not match."}}),e.abrupt("return");case 11:return c({type:"request-start"}),e.next=14,b.a.post("/auth/signup",T.stringify({name:a.inputs.name,email:a.inputs.email,password:a.inputs.password,company:a.inputs.company}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 14:if(e.sent.data.status){e.next=18;break}return c({type:"change-error",error:{name:"Error Creating Account",message:"Account already exists."}}),e.abrupt("return");case 18:c({type:"request-success"});case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(a.success)return n.a.createElement(v.a,{to:"/login"});return n.a.createElement("div",{style:{margin:"0 auto",maxWidth:400}},n.a.createElement("h1",{style:{textAlign:"center",paddingBottom:10}},"Register"),n.a.createElement(N.a,null,n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Name"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"change-inputs",inputs:{name:e.target.value}})},value:a.inputs.name,type:"text",placeholder:"George P. Beardell"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Email"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"change-inputs",inputs:{email:e.target.value}})},value:a.inputs.email,type:"email",placeholder:"beardell@hack.gt"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Password"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"change-inputs",inputs:{password:e.target.value}})},value:a.inputs.password,type:"password",placeholder:"******"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Password (confirm)"),n.a.createElement(N.a.Control,{disabled:a.requesting,onChange:function(e){return c({type:"change-inputs",inputs:{passwordConfirm:e.target.value}})},value:a.inputs.passwordConfirm,type:"password",placeholder:"******"})),n.a.createElement(N.a.Group,null,n.a.createElement(N.a.Label,null,"Company/Group Name"),n.a.createElement(N.a.Control,{as:"select",disabled:a.requesting,onChange:function(e){return c({type:"change-inputs",inputs:{company:e.target.value}})},value:a.inputs.company,type:"text",placeholder:"Company"},e.companies.map(function(e){return n.a.createElement("option",{key:e},e)}))),n.a.createElement(J.a,{variant:"primary",type:"submit",onClick:o,block:!0},a.requesting?n.a.createElement(A.a,{animation:"border",role:"status",size:"sm"}):"Register"),a.error.name?n.a.createElement(B.a,{variant:"danger"},n.a.createElement("strong",null,a.error.name),n.a.createElement("div",null,a.error.message)):null))}),Ut={maxWidth:720,margin:"0 auto"},Mt=Object(u.b)(function(e){return{account:e.account}},function(e){return{loginUser:function(t){e(D(t))}}})(function(e){var t=n.a.useReducer(function(e,t){switch(t.type){case"request-start":return Object(d.a)({},e,{requesting:!0});case"request-finish":return Object(d.a)({},e,{requesting:!1});default:return e}},{requesting:!1},void 0),r=Object(m.a)(t,2),a=(r[0],r[1],n.a.createElement("h1",null,"Welcome To Ballot!")),c=n.a.createElement("strong",null,"Your Status: ",w(e.account.role)),o=n.a.createElement("p",null,"Hello ",e.account.name,"! Thank you for using Ballot! As an owner, you have full control over every aspect of the judging and expo process. You will be able to assign tables, judges, and how projects are scored. This also means you have the potential to cause issues if you are not careful. Please make sure you have read through all the user guides before messing with the available tools."),u=n.a.createElement("p",null,"Ballot works on devices of all screen sizes! If you are using a tablet or laptop, you can use the navigation bar to navigation throughout this application. If you are on a mobile device, simply click the menu button on the upper right to access all the pages."),l=n.a.createElement("p",null,"To view all the projects at this hackathon, go to the projects page. Each project has an expo number and table number. If you tap/click on the project, you will be directed to the Devpost entry, where the group will go into more detail about the project, present videos and images, and show where you can see their project."),i=n.a.createElement("p",null,"If you go to the judging page, you will be able to judge projects as they are assigned to you. Projects will automatically be assigned to you, so all you have to do is wait for the next project to pop in. Ballot will guide you through the process and will provide you with a timer to keep you on track. You will also be presented with the judging criteria and rubric while you're scoring. "),p=(n.a.createElement("p",null,"Make sure to go to your profile to add any skills, programming languages, fields, or other keywords so that Ballot can try to optimize the projects you receive to match your experience and expertise!"),n.a.createElement("p",null,"Congratulations! You just signed up for an account; however, you are not yet approved to judge. Your page will automatically update once the admins have approved you to judge!")),g=n.a.createElement("div",{style:Ut},a,c,o,u),f=n.a.createElement("div",{style:Ut},a,c,o,u),b=n.a.createElement("div",{style:Ut},a,c,u,l,i),v=n.a.createElement("div",{style:Ut},a,c,u,l,p);switch(e.account.role){case s.Owner:return g;case s.Admin:return f;case s.Judge:return b;case s.Pending:return v}return n.a.createElement(ve,null)}),Ft=function(){return n.a.createElement("footer",{style:{textAlign:"center",margin:"50px 0"}},"Made with ",n.a.createElement("span",{role:"img","aria-label":"love"},"\ud83d\ude84")," by the HackGTeam")},_t=Object(u.b)(function(e){return{account:e.account}},function(e){return{loginUser:function(t){e(D(t))}}})(function(e){var t=function(e){var t=e.component,r=e.roleNeeded,a=e.curRole,c=Object(g.a)(e,["component","roleNeeded","curRole"]);return n.a.createElement(v.b,Object.assign({},c,{render:function(e){return a>=r?n.a.createElement(t,e):n.a.createElement(v.a,{to:{pathname:"/login"}})}}))},r=n.a.useState(!1),a=Object(m.a)(r,2),c=a[0],o=a[1];return n.a.useEffect(function(){!function(){var t=Object(p.a)(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/auth/user_data");case 2:r=t.sent,e.loginUser(Object(d.a)({},r.data,{role:O(r.data.role)})),o(!0);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[e.loginUser]),c?n.a.createElement(n.a.Fragment,null,n.a.createElement(j.a,null,n.a.createElement(G,{account:e.account}),n.a.createElement("div",{style:{padding:20}},n.a.createElement(v.d,null,n.a.createElement(v.b,{path:"/login",component:R}),n.a.createElement(v.b,{path:"/logout",component:U}),n.a.createElement(v.b,{path:"/register",component:Lt}),n.a.createElement(t,{path:"/profile",component:M,roleNeeded:s.Pending,curRole:e.account.role}),n.a.createElement(t,{path:"/projects",component:ve,roleNeeded:s.Pending,curRole:e.account.role}),n.a.createElement(t,{path:"/judging",component:Qe,roleNeeded:s.Judge,curRole:e.account.role}),n.a.createElement(t,{path:"/admin",component:Rt,roleNeeded:s.Admin,curRole:e.account.role}),n.a.createElement(v.b,{path:"/",exact:!0,component:Mt}),n.a.createElement(v.a,{to:"/"})))),n.a.createElement(Ft,null)):n.a.createElement(A.a,{animation:"grow"})}),Qt=r(38),Ht=r(134),zt=r(85),Wt=r.n(zt);var Kt=Object(Qt.c)({account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:case k:case C:return t.user;default:return e}},ballots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0,r=function(){var r,a;switch(t.type){case Ie:for(var n=e.dJudgeProjectBallotsMap?e.dJudgeProjectBallotsMap:{},c=e.dJudgeQueues?e.dJudgeQueues:{},o=e.dProjectScores?e.dProjectScores:{},u=t.ballots,s=0,l=Object.values(u);s<l.length;s++){var i=l[s];n[i.userID]||(n[i.userID]={}),n[i.userID][i.projectID]||(n[i.userID][i.projectID]=[]),o[i.projectID]||(o[i.projectID]={}),o[i.projectID][i.userID]||i.status!==be.Submitted||(o[i.projectID][i.userID]=[]),n[i.userID][i.projectID].push(i),i.status===be.Submitted&&o[i.projectID][i.userID].push(i)}for(var p=function(){var e=g[m];c[+e]={queuedProject:{id:0,pending:!1},activeProjectID:0,otherProjectIDs:[]};var t=Object.keys(n[+e]).sort(function(t,r){return new Date(n[+e][+t][0].updatedAt).getTime()-new Date(n[+e][+r][0].updatedAt).getTime()}),r=!0,a=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var l=u.value,i=n[+e][+l][0];i.status===be.Pending?c[+e].queuedProject.id=+l:i.status===be.Started||i.status===be.Assigned?c[+e].activeProjectID=+l:c[+e].otherProjectIDs.push(+l)}}catch(d){a=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}},m=0,g=Object.keys(n);m<g.length;m++)p();return console.log(o),{v:Object(d.a)({},t.ballots,{dJudgeProjectBallotsMap:n,dJudgeQueues:c,dProjectScores:o})};case De:return{v:Object(d.a)({},e,t.ballots)};case Se:return{v:t.ballotIDs.forEach(function(t){return delete e[t]})};case Ge:console.log("queue",t);var f=e.dJudgeQueues[t.result.userID],b=e.dJudgeProjectBallotsMap;return b[t.result.userID]||(b[t.result.userID]={}),b=Object(d.a)({},e.dJudgeProjectBallotsMap,Object(H.a)({},t.result.userID,Object(d.a)({},e.dJudgeProjectBallotsMap[t.result.userID],Object(H.a)({},t.result.projectID,Object(d.a)({},e.dJudgeProjectBallotsMap[t.result.userID][t.result.projectID]))))),{v:Object(d.a)({},e,{dJudgeQueues:Object(d.a)({},e.dJudgeQueues,Object(H.a)({},t.result.userID,Object(d.a)({},f,{activeProjectID:f?f.activeProjectID:0,otherProjectIDs:f?f.otherProjectIDs:[],queuedProject:{id:t.result.projectID,pending:!0}}))),dJudgeProjectBallotsMap:b})};case Te:var v=Object(d.a)({},e,t.result.newBallots,{dJudgeQueues:Object(d.a)({},e.dJudgeQueues,Object(H.a)({},t.result.userID,Object(d.a)({},e.dJudgeQueues[t.result.userID],{queuedProject:{id:t.result.projectID,pending:!1}}))),dJudgeProjectBallotsMap:Object(d.a)({},e.dJudgeProjectBallotsMap,Object(H.a)({},t.result.userID,Object(d.a)({},e.dJudgeProjectBallotsMap[t.result.userID],Object(H.a)({},t.result.projectID,Object(d.a)({},e.dJudgeProjectBallotsMap[t.result.userID][t.result.projectID],t.result.newBallots)))))}),j=!0,h=!1,y=void 0;try{for(var E,O=t.result.removedBallotIDs[Symbol.iterator]();!(j=(E=O.next()).done);j=!0)delete v[E.value]}catch(Z){h=!0,y=Z}finally{try{j||null==O.return||O.return()}finally{if(h)throw y}}return{v:v};case Ne:console.log(t.result);var w=Object.keys(t.result.newBallots)[0],P=t.result.newBallots[w],x=P.userID,k=P.projectID;return{v:Object(d.a)({},e,t.result.newBallots,{dJudgeProjectBallotsMap:Object(d.a)({},e.dJudgeProjectBallotsMap,Object(H.a)({},x,Object(d.a)({},e.dJudgeProjectBallotsMap[x],Object(H.a)({},k,Object(d.a)({},e.dJudgeProjectBallotsMap[x][k],t.result.newBallots))))),dJudgeQueues:Object(d.a)({},e.dJudgeQueues,Object(H.a)({},x,Object(d.a)({},e.dJudgeQueues[x],{queuedProject:void 0,activeProjectID:P.projectID})))})};case Be:console.log(t.result);var C=Object.keys(t.result.newBallots)[0],I=Object.values(t.result.newBallots),D=t.result.newBallots[C],S=D.userID,q=D.projectID,G=e.dJudgeQueues[S].otherProjectIDs;G.includes(q)||G.push(q);var T=e.dProjectScores;return e.dProjectScores[q]||(T[q]={}),e.dProjectScores[q][S]||(T[q][S]=[]),(r=T[q][S]).push.apply(r,Object(xe.a)(I)),{v:Object(d.a)({},e,t.result.newBallots,{dJudgeProjectBallotsMap:Object(d.a)({},e.dJudgeProjectBallotsMap,Object(H.a)({},S,Object(d.a)({},e.dJudgeProjectBallotsMap[S],Object(H.a)({},q,Object(d.a)({},e.dJudgeProjectBallotsMap[S][q],t.result.newBallots))))),dJudgeQueues:Object(d.a)({},e.dJudgeQueues,Object(H.a)({},S,Object(d.a)({},e.dJudgeQueues[S],{activeProjectID:0,otherProjectIDs:G}))),dProjectScores:T})};case Ae:console.log(t.result);var B=Object.keys(t.result.newBallots)[0],N=Object.values(t.result.newBallots),J=t.result.newBallots[B],A=J.userID,R=J.projectID,L=e.dJudgeQueues[A].otherProjectIDs;L.includes(R)||L.push(R);var U=e.dProjectScores;return e.dProjectScores[R]||(U[R]={}),e.dProjectScores[R][A]||(U[R][A]=[]),(a=U[R][A]).push.apply(a,Object(xe.a)(N)),{v:Object(d.a)({},e,t.result.newBallots,{dJudgeProjectBallotsMap:Object(d.a)({},e.dJudgeProjectBallotsMap,Object(H.a)({},A,Object(d.a)({},e.dJudgeProjectBallotsMap[A],Object(H.a)({},R,Object(d.a)({},e.dJudgeProjectBallotsMap[A][R],t.result.newBallots))))),dJudgeQueues:Object(d.a)({},e.dJudgeQueues,Object(H.a)({},A,Object(d.a)({},e.dJudgeQueues[A],{activeProjectID:0,otherProjectIDs1:L}))),dProjectScores:U})};case Je:console.log(t.result.ballotsToRemove,e);var M=e;return t.result.ballotsToRemove.forEach(function(t){delete e.dJudgeProjectBallotsMap[e[t].userID][e[t].projectID][t],e.dJudgeQueues[e[t].userID].activeProjectID=0,delete M[t]}),{v:Object(d.a)({},M,{dJudgeProjectBallotsMap:e.dJudgeProjectBallotsMap,dJudgeQueues:e.dJudgeQueues})};case Re:var F=t.result.newBallots,_=Object.keys(F).map(function(e){return parseInt(e)}),Q=!0,z=!1,W=void 0;try{for(var K,Y=_[Symbol.iterator]();!(Q=(K=Y.next()).done);Q=!0){var V=K.value,X=F[V].userID,$=F[V].projectID;e.dJudgeProjectBallotsMap[X][$]=Object.values(F),e.dJudgeQueues[X].activeProjectID=0,e.dJudgeQueues[X].otherProjectIDs.push(V)}}catch(Z){z=!0,W=Z}finally{try{Q||null==Y.return||Y.return()}finally{if(z)throw W}}return{v:Object(d.a)({},e,F,{dJudgeProjectBallotsMap:e.dJudgeProjectBallotsMap,dJudgeQueues:e.dJudgeQueues})};case Ae:return console.log("implement state chage"),{v:e};case qe:return{v:Fe};default:return{v:e}}}();if("object"===typeof r)return r.v},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{criteria:{},categories:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(d.a)({},e,{categories:Object(d.a)({},e.categories,t.categories)});case re:var r=e.categories,a=t.categoryID,n=(r[a],Object(g.a)(r,[a].map(ee)));return Object(d.a)({},e,{categories:n});case ae:for(var c={},o=t.categories,u=0,s=Object.values(o);u<s.length;u++)for(var l=s[u],i=0,p=Object.values(l.criteria);i<p.length;i++){var m=p[i];c[m.id]=Object(d.a)({},m,{categoryID:l.id})}return{criteria:c,categories:t.categories};case ne:return{categories:Object(d.a)({},e.categories,Object(H.a)({},t.critera.categoryID,Object(d.a)({},e.categories[t.critera.categoryID],{criteria:Object(d.a)({},t.criteria)}))),criteria:Object(d.a)({},e.criteria,t.criteria)};case ce:var f=e.categories[e.criteria[t.criteriaID].categoryID].criteria,b=t.criteriaID,v=(f[b],Object(g.a)(f,[b].map(ee))),j=e.criteria,h=t.criteriaID,y=(j[h],Object(g.a)(j,[h].map(ee)));return{categories:Object(d.a)({},e.categories,Object(H.a)({},t.criteria.categoryID,{critera:v})),criteria:y};case oe:return Object(d.a)({},e,{categories:Object(d.a)({},e.categories,Object(H.a)({},t.criteria.categoryID,Object(d.a)({},e.categories[t.criteria.categoryID],{criteria:t.criteria}))),criteria:Object(d.a)({},e.criteria,t.criteria)});default:return e}},companies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return t.companies;default:return e}},projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(d.a)({},e,Object(H.a)({},t.project.id,t.project));case K:var r=t.projectID;return e[r],Object(g.a)(e,[r].map(z));case Y:return t.projects;case V:return Object(d.a)({},e,t.projects);default:return e}},requesting:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Ee:return!0;case Oe:return!1;default:return e}},tableGroups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(d.a)({},e,Object(H.a)({},t.tableGroup.id,t.tableGroup));case pe:var r=t.tableGroupID;return e[r],Object(g.a)(e,[r].map(ie));case me:return t.tableGroups;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:case Ke:return Object(d.a)({},e,Object(H.a)({},t.user.id,t.user));case We:var r=e;return delete r[t.id],r;case Ye:return t.users;default:return e}}}),Yt="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Qt.d,Vt=Object(Qt.e)(Kt,Object(Qt.d)(Object(Qt.a)(Ht.a,function(){var e=Wt()(window.location.origin);return function(t){var r=t.dispatch;return function(t){return function(a){if("function"===typeof a)return t(a);var n=a.event,c=a.leave,o=a.emit,u=a.payload,s=a.handle,l=a.update,i=Object(g.a)(a,["event","leave","emit","payload","handle","update"]);if(l)e=Wt()({forceNew:!0});else{if(!n)return t(a);if(c&&e.removeAllListeners(),!o){var p=s;return"string"===typeof p&&(p=function(e){return r(Object(d.a)({type:s,result:e},i))}),e.on(n,p)}e.emit(n,u)}}}}}()),Yt()));o.a.render(n.a.createElement(u.a,{store:Vt},n.a.createElement(_t,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[135,1,2]]]);
//# sourceMappingURL=main.6259ef67.chunk.js.map